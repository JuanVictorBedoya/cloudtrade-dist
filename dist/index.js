!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=42)}([function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t){e.exports=require("co")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(0),i=r(a),u=n(1),s=r(u),o=n(84),c=r(o);c.default.locale("es"),e.exports=function(){function e(t){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"now",value:function(){return(0,c.default)().format("L LTS")}}]),e}()},function(e,t){e.exports=require("mongoose")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(73),s=r(u),o=n(5),c=r(o),d=n(0),l=r(d),f=n(1),h=r(f),p=n(6),m=r(p);e.exports=function(){function e(){(0,l.default)(this,e),this._transacts=[]}return(0,h.default)(e,[{key:"insert",value:function(t,n){var r=this;return(0,m.default)(c.default.mark(function a(){var i,u;return c.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=new t(n),a.next=3,e.execTimeout(4e3,function(){return i.save()});case 3:return u=a.sent,r._transacts.push({Model:t,type:"insert",doc:i}),a.abrupt("return",u);case 6:case"end":return a.stop()}},a,this)}))}},{key:"update",value:function(t,n,r){var a=this;return(0,m.default)(c.default.mark(function i(){var u,o;return c.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.findOne(n);case 2:if(!(u=i.sent)){i.next=11;break}return i.next=6,e.execTimeout(4e3,function(){return t.update(n,{$set:r})});case 6:return o=i.sent,a._transacts.push({Model:t,type:"update",query:n,doc:u}),i.abrupt("return",o);case 11:throw"Elemento "+(0,s.default)(n)+" no encontrado en base de datos";case 12:case"end":return i.stop()}},i,this)}))}},{key:"run",value:function(e){var t=this;return new i.default(function(n,r){(0,m.default)(e()).then(function(e){n(e)}).catch(function(e){t.rollback(),r(e)})})}},{key:"rollback",value:function(){for(console.log("ROLLBACK TRANSACTION");this._transacts.length>0;){var e=this._transacts.pop();switch(e.type){case"insert":e.doc.remove().then(function(e){}).catch(function(e){console.log("INSERT ROLLBACK ERROR",e)});break;case"update":e.Model.update(e.query,{$set:e.doc}).then(function(e){}).catch(function(e){console.log("UPDATE ROLLBACK ERROR",e)})}}}}],[{key:"execTimeout",value:function(e,t,n){return new i.default(function(r,a){var i=!0;(0,m.default)(c.default.mark(function r(){var u;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=t(),setTimeout(function(){if(i){if(u.then){u.then().then(function(e){n&&n(e)}).catch(function(){})}i=!1,a({message:"No se pudieron leer los datos, la respuesta tardó demasiado"})}},e),r.next=4,u;case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},r,this)})).then(function(e){i=!1,r(e)}).catch(function(e){i=!1,a(e)})})}}]),e}()},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("randomstring")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("passport")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(4),l=r(d),f=n(3),h=r(f),p=n(15),m=r(p),v=n(72),b=r(v),y=n(62),g=r(y),x=n(63),w=r(x),k=n(23),S=r(k);e.exports=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r._subName=n,r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"assetsFromTheme",value:function(e){var t={styleSheets:e.styleSheets,scripts:e.scripts};return this.onLoadAssets(e,t),t}},{key:"onLoadAssets",value:function(e,t){var n=this;if(this._subName){var r=e.routes.find(function(e){return e.name===n._subName});r&&(r.styleSheets&&(t.styleSheets=t.styleSheets.concat(r.styleSheets)),r.scripts&&(t.scripts=t.scripts.concat(r.scripts)))}}},{key:"render",value:function(){var e=b.default.load(this.props.themeName),t=this.assetsFromTheme(e);return m.default.createElement("html",null,m.default.createElement(g.default,{iconName:S.default.RC_ICON_APP,title:S.default.STR_COMPANY_NAME,styleSheets:t.styleSheets},m.default.createElement("meta",{name:"theme-color",content:e.htmlColor}),m.default.createElement("link",{href:"http://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}),this.props.headScripts),m.default.createElement("body",null,m.default.createElement("div",{id:"app-main"})),m.default.createElement(w.default,{scripts:t.scripts}))}}]),t}(m.default.Component)},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("babel-runtime/core-js/get-iterator")},function(e,t){e.exports=require("colors")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(0),i=r(a),u=n(1),s=r(u);e.exports=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"std",value:function(e){return{responseStatus:e.responseStatus||500,statusText:"",message:e.message||"Error: "+e}}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(25),l=r(d),f=n(18),h=r(f),p=n(6),m=r(p),v=n(78),b=r(v),y=n(88),g=r(y);e.exports=function(){function e(t,n,r){(0,s.default)(this,e),this._fileName=n,this._fileDir=r?t:h.default.join(__dirname,t),this._filePath=h.default.join(this._fileDir,this._fileName),console.log(this._filePath)}return(0,c.default)(e,null,[{key:"readToBuffer",value:function(e,t){return(0,m.default)(i.default.mark(function n(){var r,a,u;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=h.default.join(__dirname,e),a=h.default.join(r,t),!l.default.existsSync(a)){n.next=8;break}return u=l.default.createReadStream(a),n.next=5,(0,g.default)(u).then(function(e){for(var t=[],n=0,r=e.length;n<r;++n){var a=e[n];t.push(a instanceof Buffer?a:new Buffer(a))}return Buffer.concat(t)});case 5:return n.abrupt("return",n.sent);case 8:throw'No existe el archivo "'+self._fileName+'"';case 9:case"end":return n.stop()}},n,this)}))}},{key:"uploadMW",value:function(e,t,n){if(e.files&&e.files.file){var r=(0,b.default)(e.files.file.data);e.files.file.type=r}n()}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(0),i=r(a),u=n(1),s=r(u),o=n(18),c=(r(o),n(15)),d=r(c),l=n(22),f=n(68),h=r(f),p=n(71),m=r(p),v=n(70),b=r(v),y=n(65),g=r(y),x=n(64),w=r(x),k=n(66),S=r(k),E=n(69),_=r(E),O=n(67),D=r(O);e.exports=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"view",value:function(e){switch(e){case"home":return(0,l.renderToString)(d.default.createElement(h.default,null));case"tabletec":return(0,l.renderToString)(d.default.createElement(m.default,null));case"signup":var t=d.default.createElement("script",{key:0,src:"https://www.google.com/recaptcha/api.js?render=explicit",async:!0,defer:!0});return(0,l.renderToString)(d.default.createElement(b.default,{headScripts:[t]}));case"account":return(0,l.renderToString)(d.default.createElement(g.default,null));case"about":return(0,l.renderToString)(d.default.createElement(w.default,null));case"adm-home":return(0,l.renderToString)(d.default.createElement(S.default,null));case"inventory":return(0,l.renderToString)(d.default.createElement(_.default,null));case"error":return(0,l.renderToString)(d.default.createElement(D.default,null));default:return null}}}]),e}()},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";e.exports={PORT:2e3,STR_COMPANY_NAME:"CluodTrade",STR_COMPANY_L1:"Inventarios y almacenes",STR_RECAPTCHA_PUBLIC_KEY:"6LeP1SEUAAAAAH8Q8mimH_ke9iY2heAG23NGofBY",STR_RECAPTCHA_PRIVATE_KEY:"6LeP1SEUAAAAAIafLAxPfvl3qoG5mvheagUdd7bp",RC_ICON_APP:"icons/tabletec-icon.png"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(10),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(87),h=r(f),p=n(83),m=r(p),v=n(6),b=r(v),y=n(86),g=r(y),x=n(17),w=r(x),k=n(19),S=r(k),E={private:"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAz7pZEypvrFJCDshsbOamj9bmy/dXnUOyCo5b3xSvvTNIoFAC\n5ePXozCD/5Byih1JB6ZYE6OceEW6oArkPzZOl8bFBlqV9k30oerMtVei18+CfF/u\nFLWlJXs9FvXrRTKtsL43OmpLCH3LdzK9/+ZqhEx/TShp3JudUWuRW8ALqrBd8QW5\nCWJHYozYVaIpFzwJ9KW6fJ9GpZfcToCOquLWo8iINnAovXmvcAtdmzgIqoucD988\nf9oerll/CubJLy2rOiyeRvsAYouoefoyQZWN8IYPlnb5IB6Z7qnVL6rZz44dAjVw\nS3uARW3lxpfeZn3TN7wpPkBssGBF0OSEHNrXVwIDAQABAoIBAC8HHCVnpRKZKNVZ\n8JoS+cB0wZmJrK8w5TzYj9oIP+UQmC+bDZzoISiT0j5ogFXeXWs68JO5pbHg72hO\nLvBUpiRcXryag3rYmTqTArdHWNmM5BiuSyMrIHFE3ka1dAcdew8ZcT1rVQNeH1Mk\nDLnDe3fqLaPVM2o7XLlTJfxklP+WN6xWhBgDVgEawneo5svdgblYhg3u7cb4fsHg\ncAf0sCYraVuqcUHa/AUVOx7n5U39x3ShOvOQvFlWEDD6uN4Yg/twW2UyfFDWD57p\n2oPIEf06wOOu2XylPQwEU9w92Fr4yNqk0xksn8sOjbRyEPZncpDICsPTo1nsrz+R\n0AcwWUkCgYEA7DfUujbbg6WrfSOyS718kTeej0Il5z19JYu11g+Sis4r8RWbT92q\nweCp4dCGCpJrsPbs4+s4hT42sKfjUcUy5ZCGTDturQNbhH0RGxPp1KUTrytzdph8\n4mqpCVYcN1AmLCCA0WtFqJ53taWuipcLtU48ZRC4jHI+stUSNCtaE8UCgYEA4R+6\nx5mUjOWAK8GSTgHMWa72KqaxR/osYwmMPtHtjIFm1aOElQaXbGlZKd3dR5Tnw/4R\n8hO/gJc+eQeaPGhri0IVmG66JNTw8q0M0Qd+l0OrarYS5c09XzjAUdGOatstsaNE\nrhgRG90HvVYt0cHyKRa/C4+CnEBod/EoS/UnhGsCgYB5wT1Qzj3PWXFPCzs3du/i\nGf0Mclf/HN6In76WG2i5SxOzLCPlwqflTtvBnS25/Uas7FmmEPQNGcguvhqZZz+Y\nvCm82VVusDBX1e8fOeBozr2aqJbXJjoYqkl+mnfoutMyI37Ccrxw8V1ar4+Lt9c9\nGJpgrYGyQqC2pMTBRyci0QKBgHxc9uXE5ddgAQorCROm0qjIipzNMSo9/b9ISv15\nIu13nsNubZOV7JirKeKC+fbNP6t585fzaNs0sgJSPNYaKS7o9t0abiJisCifiHEA\n3uHZNBzjMFVaqAiuZS/NwAsvwXJca1hxWyI1XE0wCmfR6GDie+96/AAtZIi95DDx\n4T65AoGBAIE5LSP+glxJEd8jU/qc80D/dXf6icURyYDGARw8mziAgw6fL9cwbmqb\nIGDxP1ke2FA8OZ0W4VybRi9UcprenvADYpPb+CPZv4gxGoDFg0Bb/JcFUKL29hC1\nsteX0GR4TKYNeXLC+zz7Qr0DzhpqRswSyHG5GckkIRdgHx4l/Uza\n-----END RSA PRIVATE KEY-----",public:"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAz7pZEypvrFJCDshsbOam\nj9bmy/dXnUOyCo5b3xSvvTNIoFAC5ePXozCD/5Byih1JB6ZYE6OceEW6oArkPzZO\nl8bFBlqV9k30oerMtVei18+CfF/uFLWlJXs9FvXrRTKtsL43OmpLCH3LdzK9/+Zq\nhEx/TShp3JudUWuRW8ALqrBd8QW5CWJHYozYVaIpFzwJ9KW6fJ9GpZfcToCOquLW\no8iINnAovXmvcAtdmzgIqoucD988f9oerll/CubJLy2rOiyeRvsAYouoefoyQZWN\n8IYPlnb5IB6Z7qnVL6rZz44dAjVwS3uARW3lxpfeZn3TN7wpPkBssGBF0OSEHNrX\nVwIDAQAB\n-----END PUBLIC KEY-----"},_=function(){function e(t){(0,c.default)(this,e),this.passport=t,t.use("jwt",new g.default(this.authorize.bind(this)))}return(0,l.default)(e,[{key:"sign",value:function(e){var t=E.private;return new s.default(function(n,r){m.default.sign(e,t,{algorithm:"RS256"},function(e,t){e?r(e):n(t)})})}},{key:"verify",value:function(e){var t=E.public;return new s.default(function(n,r){m.default.verify(e,t,{algorithms:["RS256"]},function(e,t){e?r(e):n(t)})})}},{key:"authorize",value:function(e,t){var n=this;if(e.headers&&e.headers.authorization){var r=e.headers.authorization;this.verify(r).then(function(r){n.onAuthenticate(e,r,t)}).catch(function(e){n.onUnauthorized("Credenciales de usuario inválidos",t)})}else this.onUnauthorized("El usuario no tiene credenciales",t)}},{key:"onAuthenticate",value:function(e,t,n){var r=this,a=e.app.systemdb;(0,b.default)(i.default.mark(function e(){var u,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.users.findOne({code:t.code});case 2:if(!(u=e.sent)){e.next=12;break}return s=u.emails.find(function(e){return e.current}),e.next=7,a.emails.findOne({code:s.code});case 7:o=e.sent,u.email=o.email,n(null,u),e.next=13;break;case 12:r.onUnauthorized("El usuario tiene credenciales válidos pero no se encontró registro de sus datos",n);case 13:return e.abrupt("return",{});case 14:case"end":return e.stop()}},e,this)})).then(function(e){}).catch(function(e){n(e)})}},{key:"onUnauthorized",value:function(e,t){console.log(w.default.yellow("ADVERTENCIA:",e)),t(null,!1,e)}}],[{key:"verifyCaptchaMW",value:function(e,t,n){var r=e.body.recaptcha,a=e.connection.remoteAddress;if(void 0===r||""===r||null===r){var i=S.default.std("No has enviado un codigo recaptcha");t.status(i.responseStatus).json(i)}else{var u="https://www.google.com/recaptcha/api/siteverify?secret="+e.app.defs.STR_RECAPTCHA_PRIVATE_KEY+"&response="+r+"&remoteip="+a;(0,h.default)(u,function(e,r,a){if(a=JSON.parse(a),void 0===a.success||a.success)n();else{var i=S.default.std("No se pudo verificar el recaptcha");t.status(i.responseStatus).json(i)}})}}}]),e}();e.exports=_},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("validator")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(81),l=r(d),f=n(18),h=r(f),p=n(12),m=r(p),v=n(77),b=r(v),y=n(74),g=r(y),x=n(13),w=r(x),k=n(82),S=r(k),E=n(17),_=r(E),O=n(23),D=r(O),C=n(24),q=r(C),A=n(41),T=r(A),N=n(19),P=r(N),R=n(20),M=(r(R),n(48)),j=r(M),W=n(40),B=r(W);e.exports=function(){function e(){(0,s.default)(this,e);var t=S.default.readFileSync(h.default.join(__dirname,"config.json"));this._control=(0,m.default)(),this._db=new j.default(t.db),this._mailer=new T.default,this._auth=new q.default(w.default),this._control.use(m.default.static(h.default.join(__dirname,"assets"))),this._control.use(this.appMW.bind(this)),this._control.use((0,b.default)()),this._control.use(g.default.urlencoded({extended:!1})),this._control.use(g.default.json());var n=new B.default;this._control.use("/",this.logMW,n.router),this._control.use(this.notFound.bind(this)),this.onLoad()}return(0,c.default)(e,[{key:"onLoad",value:function(){this._server=l.default.createServer(this._control),this._server.listen(D.default.PORT,this.onStart.bind(this))}},{key:"onStart",value:function(){console.log(_.default.blue("INFORMACIÓN: El servidor está listo y escuchando por el puerto:",D.default.PORT))}},{key:"appMW",value:function(e,t,n){var r=this;e.app={defs:D.default,auth:this._auth,systemdb:this._db.systemdb,mailer:this._mailer,dbConnection:function(e){return new i.default(function(t,n){r._db.connection(e,function(e,r){e?n(e):t(r)})})}},t.sendError=function(e){var n=P.default.std(e);console.error(_.default.red(n.message)),t.status(n.responseStatus).json(n)},n()}},{key:"logMW",value:function(e,t,n){console.log(e.method,e.url),n()}},{key:"notFound",value:function(e,t){t.status(404).send("NO ENCONTRADO")}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(5),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(6),h=r(f),p=n(12),m=r(p),v=n(13),b=(r(v),n(20)),y=(r(b),function(){function e(){(0,c.default)(this,e),this.router=m.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/ver/:article",this.findOne.bind(this)),this.router.get("/listar-marcas",this.findAllBrands.bind(this)),this.router.get("/listar-categorias",this.findAllCategories.bind(this)),this.router.post("/insertar",this.insertOnePOST.bind(this)),this.router.post("/upload-image",this.uploadImagePOST.bind(this))}return(0,l.default)(e,[{key:"findAll",value:function(e,t){e.app.db.articles.findAll().then(function(n){t.status(200).json({articles:{columns:e.app.db.articles.getSchemaColumns(),rows:n}})}).catch(function(e){t.sendError(e)})}},{key:"findAllBrands",value:function(e,t){e.app.db.articleBrands.findAll().then(function(e){t.status(200).json({brands:e})}).catch(function(e){t.sendError(e)})}},{key:"findAllCategories",value:function(e,t){e.app.db.articleCategories.findAll().then(function(e){t.status(200).json({categories:e})}).catch(function(e){t.sendError(e)})}},{key:"findOne",value:function(e,t){var n=this;(0,h.default)(s.default.mark(function t(){var r,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.articles.findOne({code:e.params.article});case 2:return r=t.sent,t.next=5,n.enc(r.modImages);case 5:return a=t.sent,t.abrupt("return",{code:r.code,clientCode:r.clientCode,barCode:r.barCode,name:r.name,description:r.description,brand:r.brand,category:r.category,images:a,customFields:r.customFields,prices:r.prices,creationDate:r.creationDate,modifiedDate:r.modifiedDate});case 7:case"end":return t.stop()}},t,this)})).then(function(e){t.json({article:e})}).catch(function(e){t.sendError(e)})}},{key:"insertOnePOST",value:function(e,t){(0,h.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.articles.insertOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({article:e})}).catch(function(e){t.sendError(e)})}},{key:"uploadImagePOST",value:function(e,t){(0,h.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.images.insertOne(e.files.file);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({name:e.code})}).catch(function(e){t.sendError(e)})}},{key:"enc",value:function(e){var t=e.map(function(e){return(0,h.default)(s.default.mark(function t(){var n,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Uint8Array(e.data.buffer),r=Array.prototype.map.call(n,function(e){return String.fromCharCode(e)}).join(""),t.abrupt("return",r);case 3:case"end":return t.stop()}},t,this)}))});return i.default.all(t)}}]),e}());e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(12),l=r(d),f=n(13),h=r(f),p=n(6),m=r(p),v=n(28),b=r(v),y=n(35),g=r(y),x=n(30),w=r(x),k=n(31),S=r(k),E=n(32),_=r(E),O=n(33),D=r(O),C=n(34),q=r(C),A=function(){function e(){(0,s.default)(this,e),this.router=l.default.Router(),this.router.use(h.default.authenticate("jwt",{session:!1})),this.router.use(this.authorizeUserOnCompany),this.router.get("/autenticar",this.authorizeUserOnCompanyGET);var t=new b.default;this.router.use("/adm/inventarios/articulos",t.router);var n=new g.default;this.router.use("/adm/inventarios/almacenes",n.router);var r=new w.default;this.router.use("/adm/inventarios/proveedores",r.router);var a=new S.default;this.router.use("/adm/inventarios/compras",a.router);var i=new _.default;this.router.use("/adm/inventarios/transferencias",i.router);var u=new D.default;this.router.use("/adm/inventarios/almacenes-entradas",u.router);var o=new q.default;this.router.use("/adm/inventarios/almacenes-salidas",o.router),this.router.use(this.notFound.bind(this))}return(0,c.default)(e,[{key:"authorizeUserOnCompanyGET",value:function(e,t){t.json({user:{code:e.user.code,name:e.user.name,email:e.user.email,role:e.user.role}})}},{key:"notFound",value:function(e,t){t.sendError({responseStatus:404,message:"No se encontró el recurso."})}},{key:"authorizeUserOnCompany",value:function(e,t,n){(0,m.default)(i.default.mark(function t(){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.user.companies.find(function(t){return e.company.code===t.code}),t.next=3,e.app.db.staff.findOne({code:e.user.code});case 3:if(r=t.sent,!n||!r){t.next=9;break}return e.user.role=r.role,t.abrupt("return",e.user);case 9:throw"Acceso no autorizado";case 10:case"end":return t.stop()}},t,this)})).then(function(e){n()}).catch(function(e){t.sendError(e)})}},{key:"validate",value:function(e,t,n){e.company?"active"===e.company.status?n():t.sendError({responseStatus:406,message:"La empresa <"+e.company.name+"> tiene estado <"+e.company.status+">"}):t.sendError({responseStatus:404,message:"Se requiere el nombre de una empresa"})}}]),e}();e.exports=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(6),l=r(d),f=n(12),h=r(f),p=n(13),m=(r(p),function(){function e(){(0,s.default)(this,e),this.router=h.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/listar-ciudades",this.findAllCities.bind(this)),this.router.get("/ver/:provider",this.findOne.bind(this)),this.router.post("/insertar",this.insertOnePOST.bind(this)),this.router.put("/editar",this.updateOnePUT.bind(this))}return(0,c.default)(e,[{key:"findAll",value:function(e,t){e.app.db.providers.findAll().then(function(n){t.status(200).json({providers:{columns:e.app.db.providers.getSchemaColumns(),rows:n}})}).catch(function(e){t.sendError(e)})}},{key:"findOne",value:function(e,t){e.app.db.providers.findOne({code:e.params.provider}).then(function(e){t.status(200).json({provider:e})}).catch(function(e){t.sendError(e)})}},{key:"findAllCities",value:function(e,t){e.app.db.cities.findAll().then(function(e){t.status(200).json({cities:e})}).catch(function(e){t.sendError(e)})}},{key:"insertOnePOST",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.providers.insertOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({provider:e})}).catch(function(e){t.sendError(e)})}},{key:"updateOnePUT",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.providers.updateOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({provider:e})}).catch(function(e){t.sendError(e)})}}]),e}());e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(6),l=r(d),f=n(12),h=r(f),p=n(13),m=(r(p),function(){function e(){(0,s.default)(this,e),this.router=h.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/ver/:purchase",this.findOne.bind(this)),this.router.post("/insertar",this.insertOnePOST.bind(this)),this.router.put("/cambiar-estado",this.updateOneStatusPUT.bind(this)),this.router.get("/listar-entregados",this.findAllDeliveredGET.bind(this)),this.router.get("/ver-articulos/:purchase",this.findOneArticlesGET.bind(this))}return(0,c.default)(e,[{key:"findAll",value:function(e,t){e.app.db.purchases.findAll().then(function(n){var r=n.map(function(e){return{code:e.code,business:e.business,order:e.order,guideNumber:e.guideNumber,status:e.status,providerName:e.providerName,contactName:e.contactName,payDate:e.payDate,billingDir:e.billingDir,shippingDir:e.shippingDir,description:e.description,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({purchases:{columns:e.app.db.purchases.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findOne",value:function(e,t){e.app.db.purchases.findOne({code:e.params.purchase}).then(function(e){var n={code:e.code,business:e.business,order:e.order,guideNumber:e.guideNumber,status:e.status,provider:e.modProvider,contactName:e.contactName,payDate:e.payDate,billingDir:e.billingDir,shippingDir:e.shippingDir,terms:e.terms,description:e.description,articles:e.modArticles,creationDate:e.creationDate,modifiedDate:e.modifiedDate};t.status(200).json({purchase:n})}).catch(function(e){t.sendError(e)})}},{key:"findAllDeliveredGET",value:function(e,t){e.app.db.purchases.find({status:"delivered"}).then(function(n){var r=n.map(function(e){return{code:e.code,business:e.business,order:e.order,guideNumber:e.guideNumber,status:e.status,providerName:e.providerName,contactName:e.contactName,payDate:e.payDate,billingDir:e.billingDir,shippingDir:e.shippDir,description:e.description,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({purchases:{columns:e.app.db.purchases.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findOneArticlesGET",value:function(e,t){e.app.db.purchases.findOne({code:e.params.purchase}).then(function(e){t.status(200).json({purchaseArticles:e.modArticles})}).catch(function(e){t.sendError(e)})}},{key:"insertOnePOST",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.purchases.insertOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({purchase:e})}).catch(function(e){t.sendError(e)})}},{key:"updateOneStatusPUT",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.purchases.updateOneStatus(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({purchase:e})}).catch(function(e){t.sendError(e)})}}]),e}());e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(6),l=r(d),f=n(12),h=r(f),p=n(13),m=(r(p),function(){function e(){(0,s.default)(this,e),this.router=h.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/ver/:transfer",this.findOne_GET.bind(this)),this.router.post("/insertar",this.insertOnePOST.bind(this)),this.router.put("/cambiar-estado",this.updateOneStatusPUT.bind(this)),this.router.get("/listar-aprobados",this.findAllApprovedGET.bind(this)),this.router.get("/listar-retirados",this.findAllWithdrawnGET.bind(this)),this.router.get("/ver-articulos/:transfer",this.findOneArticlesGET.bind(this))}return(0,c.default)(e,[{key:"findAll",value:function(e,t){e.app.db.transfers.findAll().then(function(n){var r=n.map(function(e){return{code:e.code,business:e.business,status:e.status,originWarehouseName:e.originWarehouseName,destinationWarehouseName:e.destinationWarehouseName,description:e.description,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({transfers:{columns:e.app.db.transfers.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findOne_GET",value:function(e,t){e.app.db.transfers.findOne({code:e.params.transfer}).then(function(e){t.status(200).json({transfer:{code:e.code,business:e.business,status:e.status,originWarehouse:e.originWarehouse,destinationWarehouse:e.destinationWarehouse,description:e.description,articles:e.modArticles,creationDate:e.creationDate,modifiedDate:e.modifiedDate}})}).catch(function(e){t.sendError(e)})}},{key:"findAllApprovedGET",value:function(e,t){e.app.db.transfers.find({status:"approved"}).then(function(n){var r=n.map(function(e){return{code:e.code,business:e.business,status:e.status,originWarehouseCode:e.originWarehouseCode,originWarehouseName:e.originWarehouseName,destinationWarehouseCode:e.destinationWarehouseCode,destinationWarehouseName:e.destinationWarehouseName,description:e.description,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({transfers:{columns:e.app.db.transfers.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findAllWithdrawnGET",value:function(e,t){e.app.db.transfers.find({status:"withdrawn"}).then(function(n){var r=n.map(function(e){return{code:e.code,business:e.business,status:e.status,originWarehouseCode:e.originWarehouseCode,originWarehouseName:e.originWarehouseName,destinationWarehouseCode:e.destinationWarehouseCode,destinationWarehouseName:e.destinationWarehouseName,description:e.description,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({transfers:{columns:e.app.db.transfers.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findOneArticlesGET",value:function(e,t){e.app.db.transfers.findOne({code:e.params.transfer}).then(function(e){t.status(200).json({transferArticles:e.modArticles})}).catch(function(e){t.sendError(e)})}},{key:"insertOnePOST",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.transfers.insertOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({transfer:e})}).catch(function(e){t.sendError(e)})}},{key:"updateOneStatusPUT",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.transfers.updateOneStatus(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({transfer:e})}).catch(function(e){t.sendError(e)})}}]),e}());e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(6),l=r(d),f=n(12),h=r(f),p=n(13),m=(r(p),function(){function e(){(0,s.default)(this,e),this.router=h.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/ver/:entry",this.findOne.bind(this)),this.router.post("/insertar",this.insertOnePOST.bind(this))}return(0,c.default)(e,[{key:"findAll",value:function(e,t){e.app.db.warehouseEntries.findAll().then(function(n){var r=n.map(function(e){return{code:e.code,transactionsTypeName:e.transactionsTypeName,description:e.description,entryDate:e.entryDate,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({entries:{columns:e.app.db.warehouseEntries.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findOne",value:function(e,t){(0,l.default)(i.default.mark(function t(){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.warehouseEntries.findOne({code:e.params.entry});case 2:n=t.sent,r=void 0,t.t0=n.transactionsTypeName,t.next="purchases"===t.t0?7:"transfers"===t.t0?11:15;break;case 7:return t.next=9,e.app.db.warehouseEntryPurchases.findOne({code:e.params.entry});case 9:return r=t.sent,t.abrupt("break",16);case 11:return t.next=13,e.app.db.warehouseEntryTransfers.findOne({code:e.params.entry});case 13:return r=t.sent,t.abrupt("break",16);case 15:throw"No se reconoce el tipo de transacción";case 16:return t.abrupt("return",{code:r.code,transactionsTypeName:n.transactionsTypeName,description:n.description,entryDate:n.entryDate,transactions:r.modTransactions,creationDate:r.creationDate,modifiedDate:r.modifiedDate});case 17:case"end":return t.stop()}},t,this)})).then(function(e){t.json({entry:e})}).catch(function(e){t.sendError(e)})}},{key:"insertOnePOST",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.body.transactionsTypeName,t.next="purchases"===t.t0?3:"transfers"===t.t0?6:"custom"===t.t0?9:10;break;case 3:return t.next=5,e.app.db.warehouseEntryPurchases.insertOne(e.body);case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,e.app.db.warehouseEntryTransfers.insertOne(e.body);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("break",11);case 10:throw"No se reconoce el tipo de transacción";case 11:case"end":return t.stop()}},t,this)})).then(function(e){t.json(e)}).catch(function(e){t.sendError(e)})}}]),e}());e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(6),l=r(d),f=n(12),h=r(f),p=n(13),m=(r(p),function(){function e(){(0,s.default)(this,e),this.router=h.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/ver/:outlet",this.findOne.bind(this)),this.router.post("/insertar",this.insertOnePOST.bind(this))}return(0,c.default)(e,[{key:"findAll",value:function(e,t){e.app.db.warehouseOutlets.findAll().then(function(n){var r=n.map(function(e){return{code:e.code,transactionsTypeName:e.transactionsTypeName,description:e.description,outletDate:e.outletDate,creationDate:e.creationDate,modifiedDate:e.modifiedDate}});t.status(200).json({outlets:{columns:e.app.db.warehouseOutlets.getSchemaColumns(),rows:r}})}).catch(function(e){t.sendError(e)})}},{key:"findOne",value:function(e,t){(0,l.default)(i.default.mark(function t(){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.warehouseOutlets.findOne({code:e.params.outlet});case 2:n=t.sent,t.t0=n.transactionsTypeName,t.next="transfers"===t.t0?6:10;break;case 6:return t.next=8,e.app.db.warehouseOutletTransfers.findOne({code:e.params.outlet});case 8:return r=t.sent,t.abrupt("return",{code:r.code,transactionsTypeName:n.transactionsTypeName,description:n.description,outletDate:n.outletDate,transactions:r.modTransactions,creationDate:r.creationDate,modifiedDate:r.modifiedDate});case 10:throw"No se reconoce el tipo de transacción en salida de almacén";case 11:case"end":return t.stop()}},t,this)})).then(function(e){t.json({outlet:e})}).catch(function(e){t.sendError(e)})}},{key:"insertOnePOST",value:function(e,t){(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.body.transactionsTypeName,t.next="transfers"===t.t0?3:"custom"===t.t0?7:8;break;case 3:return t.next=5,e.app.db.warehouseOutletTransfers.insertOne(e.body);case 5:return t.abrupt("return",t.sent);case 7:return t.abrupt("break",9);case 8:throw"No se reconoce el tipo de transacción";case 9:case"end":return t.stop()}},t,this)})).then(function(e){t.json(e)}).catch(function(e){t.sendError(e)})}}]),e}());e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(16),s=r(u),o=n(5),c=r(o),d=n(2),l=r(d),f=n(0),h=r(f),p=n(1),m=r(p),v=n(4),b=r(v),y=n(3),g=r(y),x=n(6),w=r(x),k=n(12),S=r(k),E=n(13),_=(r(E),n(15)),O=r(_),D=n(22),C=n(80),q=r(C),A=n(7),T=r(A),N=function(e){function t(e,n){return(0,h.default)(this,t),(0,b.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=[],t=0,n=0;for(var r in this.props.articles){var a=this.props.articles[r];n+=a.stock,e.push(O.default.createElement("tr",{key:t++},O.default.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t),O.default.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.name),O.default.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.totalEntry),O.default.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.totalOutlet),O.default.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.stock)))}return O.default.createElement("html",null,O.default.createElement("head",null),O.default.createElement("body",null,O.default.createElement("div",{style:{padding:"2rem 3rem",fontFamily:"Arial",fontSize:"8pt"}},O.default.createElement("table",{style:{width:"100%"}},O.default.createElement("tbody",null,O.default.createElement("tr",null,O.default.createElement("td",null,O.default.createElement("div",null,O.default.createElement("span",{style:{fontSize:"8pt"}},this.props.company.name)),O.default.createElement("div",null,O.default.createElement("span",{style:{fontSize:"8pt"}},"Dirección: German Bush N 738")),O.default.createElement("div",null,O.default.createElement("span",{style:{fontSize:"8pt"}},"Teléfono: 8598565"))),O.default.createElement("td",null)))),O.default.createElement("h3",{style:{textAlign:"center",fontSize:"10pt"}},"Reporte de Existencias en Almacén"),O.default.createElement("h4",{style:{fontSize:"10pt"}},this.props.warehouse.name),O.default.createElement("table",{style:{width:"100%",border:"1px solid black",borderCollapse:"collapse",fontSize:"10pt"}},O.default.createElement("thead",null,O.default.createElement("tr",null,O.default.createElement("th",{style:{border:"1px solid black"}},"No"),O.default.createElement("th",{style:{border:"1px solid black"}},"Artículo"),O.default.createElement("th",{style:{border:"1px solid black"}},"Entradas"),O.default.createElement("th",{style:{border:"1px solid black"}},"Salidas"),O.default.createElement("th",{style:{border:"1px solid black"}},"Inventario"))),O.default.createElement("tbody",null,e)),O.default.createElement("h4",{style:{fontSize:"10pt"}},"Cantidad Total: "+n+" Artículos"),O.default.createElement("div",null,O.default.createElement("span",{style:{fontSize:"8pt"}},"Reporte No RPRT-1245")),O.default.createElement("div",null,O.default.createElement("span",{style:{fontSize:"8pt"}},"Procesado: "+T.default.now())))))}}]),t}(O.default.Component),P=function(){function e(){(0,h.default)(this,e),this.router=S.default.Router(),this.router.get("/listar",this.findAll.bind(this)),this.router.get("/listar-ciudades",this.findAllCities.bind(this)),this.router.get("/ver/:warehouse",this.findOne.bind(this)),this.router.post("/insertar",this.insertOne_POST.bind(this)),this.router.put("/editar",this.updateOne_PUT.bind(this)),this.router.get("/ver-articulos/:warehouse",this.findAllArticlesFor_GET.bind(this)),this.router.get("/reportes/stock/:warehouse",this.report1.bind(this))}return(0,m.default)(e,[{key:"findAll",value:function(e,t){e.app.db.warehouses.findAll().then(function(n){t.status(200).json({warehouses:{columns:e.app.db.warehouses.getSchemaColumns(),rows:n}})}).catch(function(e){t.sendError(e)})}},{key:"findOne",value:function(e,t){e.app.db.warehouses.findOne({code:e.params.warehouse}).then(function(e){t.status(200).json({warehouse:e})}).catch(function(e){t.sendError(e)})}},{key:"findAllArticlesFor_GET",value:function(e,t){(0,w.default)(c.default.mark(function t(){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.warehouses.findOne({code:e.params.warehouse},"code name articles");case 2:return n=t.sent,t.next=5,n.findAllStockOn(e.app.db.articles);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)})).then(function(e){t.json({articles:{rows:e}})}).catch(function(e){t.sendError(e)})}},{key:"findAllCities",value:function(e,t){e.app.db.cities.findAll().then(function(e){t.status(200).json({cities:e})}).catch(function(e){t.sendError(e)})}},{key:"insertOne_POST",value:function(e,t){(0,w.default)(c.default.mark(function t(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.warehouses.insertOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json({warehouse:e})}).catch(function(e){t.sendError(e)})}},{key:"updateOne_PUT",value:function(e,t){(0,w.default)(c.default.mark(function t(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.warehouses.updateOne(e.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})).then(function(e){t.json(e)}).catch(function(e){t.sendError(e)})}},{key:"report1",value:function(e,t){(0,w.default)(c.default.mark(function t(){var n,r,a,u,o,d,l,f,h,p,m,v,b,y,g,x,w,k,S,E,_,C,A,T,P,R,M,j,W,B,F,I,H,z,G,U,L,Y,V,K,J,Z,X,Q,$,ee,te,ne,re,ae,ie,ue,se,oe,ce,de,le,fe,he,pe,me,ve,be,ye,ge,xe,we,ke,Se,Ee;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.db.warehouses.findOne({code:e.params.warehouse});case 2:return n=t.sent,r={},t.next=6,e.app.db.warehouseEntryPurchases.findAll();case 6:return a=t.sent,t.next=9,e.app.db.warehouseEntryTransfers.findAll();case 9:if(u=t.sent,!a.length){t.next=92;break}o=!0,d=!1,l=void 0,t.prev=14,f=(0,s.default)(a);case 16:if(o=(h=f.next()).done){t.next=78;break}p=h.value,m=!0,v=!1,b=void 0,t.prev=21,y=(0,s.default)(p.transactions);case 23:if(m=(g=y.next()).done){t.next=61;break}x=g.value,w=!0,k=!1,S=void 0,t.prev=28,E=(0,s.default)(x.articles);case 30:if(w=(_=E.next()).done){t.next=44;break}if(C=_.value,C.warehouseCode!==n.code){t.next=41;break}if(void 0!==r[C.code]){t.next=40;break}return t.next=36,e.app.db.articles.findOne({code:C.code},"name");case 36:A=t.sent,r[C.code]={name:A.name,totalEntry:C.quantity,totalOutlet:0},t.next=41;break;case 40:r[C.code].totalEntry+=C.quantity;case 41:w=!0,t.next=30;break;case 44:t.next=50;break;case 46:t.prev=46,t.t0=t.catch(28),k=!0,S=t.t0;case 50:t.prev=50,t.prev=51,!w&&E.return&&E.return();case 53:if(t.prev=53,!k){t.next=56;break}throw S;case 56:return t.finish(53);case 57:return t.finish(50);case 58:m=!0,t.next=23;break;case 61:t.next=67;break;case 63:t.prev=63,t.t1=t.catch(21),v=!0,b=t.t1;case 67:t.prev=67,t.prev=68,!m&&y.return&&y.return();case 70:if(t.prev=70,!v){t.next=73;break}throw b;case 73:return t.finish(70);case 74:return t.finish(67);case 75:o=!0,t.next=16;break;case 78:t.next=84;break;case 80:t.prev=80,t.t2=t.catch(14),d=!0,l=t.t2;case 84:t.prev=84,t.prev=85,!o&&f.return&&f.return();case 87:if(t.prev=87,!d){t.next=90;break}throw l;case 90:return t.finish(87);case 91:return t.finish(84);case 92:if(!u.length){t.next=174;break}T=!0,P=!1,R=void 0,t.prev=96,M=(0,s.default)(u);case 98:if(T=(j=M.next()).done){t.next=160;break}W=j.value,B=!0,F=!1,I=void 0,t.prev=103,H=(0,s.default)(W.transactions);case 105:if(B=(z=H.next()).done){t.next=143;break}G=z.value,U=!0,L=!1,Y=void 0,t.prev=110,V=(0,s.default)(G.articles);case 112:if(U=(K=V.next()).done){t.next=126;break}if(J=K.value,J.warehouseCode!==n.code){t.next=123;break}if(void 0!==r[J.code]){t.next=122;break}return t.next=118,e.app.db.articles.findOne({code:J.code},"name");case 118:Z=t.sent,r[J.code]={name:Z.name,totalEntry:J.quantity,totalOutlet:0},t.next=123;break;case 122:r[J.code].totalEntry+=J.quantity;case 123:U=!0,t.next=112;break;case 126:t.next=132;break;case 128:t.prev=128,t.t3=t.catch(110),L=!0,Y=t.t3;case 132:t.prev=132,t.prev=133,!U&&V.return&&V.return();case 135:if(t.prev=135,!L){t.next=138;break}throw Y;case 138:return t.finish(135);case 139:return t.finish(132);case 140:B=!0,t.next=105;break;case 143:t.next=149;break;case 145:t.prev=145,t.t4=t.catch(103),F=!0,I=t.t4;case 149:t.prev=149,t.prev=150,!B&&H.return&&H.return();case 152:if(t.prev=152,!F){t.next=155;break}throw I;case 155:return t.finish(152);case 156:return t.finish(149);case 157:T=!0,t.next=98;break;case 160:t.next=166;break;case 162:t.prev=162,t.t5=t.catch(96),P=!0,R=t.t5;case 166:t.prev=166,t.prev=167,!T&&M.return&&M.return();case 169:if(t.prev=169,!P){t.next=172;break}throw R;case 172:return t.finish(169);case 173:return t.finish(166);case 174:return t.next=176,e.app.db.warehouseOutletTransfers.findAll();case 176:if(X=t.sent,!X.length){t.next=259;break}Q=!0,$=!1,ee=void 0,t.prev=181,te=(0,s.default)(X);case 183:if(Q=(ne=te.next()).done){t.next=245;break}re=ne.value,ae=!0,ie=!1,ue=void 0,t.prev=188,se=(0,s.default)(re.transactions);case 190:if(ae=(oe=se.next()).done){t.next=228;break}ce=oe.value,de=!0,le=!1,fe=void 0,t.prev=195,he=(0,s.default)(ce.articles);case 197:if(de=(pe=he.next()).done){t.next=211;break}if(me=pe.value,me.warehouseCode!==n.code){t.next=208;break}if(void 0!==r[me.code]){t.next=207;break}return t.next=203,e.app.db.articles.findOne({code:me.code},"name");case 203:ve=t.sent,r[me.code]={name:ve.name,totalEntry:0,totalOutlet:me.quantity},t.next=208;break;case 207:r[me.code].totalOutlet+=me.quantity;case 208:de=!0,t.next=197;break;case 211:t.next=217;break;case 213:t.prev=213,t.t6=t.catch(195),le=!0,fe=t.t6;case 217:t.prev=217,t.prev=218,!de&&he.return&&he.return();case 220:if(t.prev=220,!le){t.next=223;break}throw fe;case 223:return t.finish(220);case 224:return t.finish(217);case 225:ae=!0,t.next=190;break;case 228:t.next=234;break;case 230:t.prev=230,t.t7=t.catch(188),ie=!0,ue=t.t7;case 234:t.prev=234,t.prev=235,!ae&&se.return&&se.return();case 237:if(t.prev=237,!ie){t.next=240;break}throw ue;case 240:return t.finish(237);case 241:return t.finish(234);case 242:Q=!0,t.next=183;break;case 245:t.next=251;break;case 247:t.prev=247,t.t8=t.catch(181),$=!0,ee=t.t8;case 251:t.prev=251,t.prev=252,!Q&&te.return&&te.return();case 254:if(t.prev=254,!$){t.next=257;break}throw ee;case 257:return t.finish(254);case 258:return t.finish(251);case 259:be=!0,ye=!1,ge=void 0,t.prev=262,xe=(0,s.default)(n.articles);case 264:if(be=(we=xe.next()).done){t.next=277;break}if(ke=we.value,void 0!==r[ke.code]){t.next=273;break}return t.next=269,e.app.db.articles.findOne({code:ke.code},"name");case 269:Se=t.sent,r[ke.code]={name:Se.name,totalEntry:0,totalOutlet:0,stock:ke.stock},t.next=274;break;case 273:r[ke.code].stock=ke.stock;case 274:be=!0,t.next=264;break;case 277:t.next=283;break;case 279:t.prev=279,t.t9=t.catch(262),ye=!0,ge=t.t9;case 283:t.prev=283,t.prev=284,!be&&xe.return&&xe.return();case 286:if(t.prev=286,!ye){t.next=289;break}throw ge;case 289:return t.finish(286);case 290:return t.finish(283);case 291:return Ee=(0,D.renderToString)(O.default.createElement(N,{company:e.company,warehouse:n,articles:r})),t.next=294,new i.default(function(e,t){var n={height:"11.69in",width:"8.26in",type:"pdf"};q.default.create(Ee,n).toBuffer(function(n,r){n?t("Failed to convert to pdf:"):Buffer.isBuffer(r)?e(r.toString("base64")):t("This is a buffer:",Buffer.isBuffer(r))})});case 294:return t.abrupt("return",t.sent);case 295:case"end":return t.stop()}},t,this,[[14,80,84,92],[21,63,67,75],[28,46,50,58],[51,,53,57],[68,,70,74],[85,,87,91],[96,162,166,174],[103,145,149,157],[110,128,132,140],[133,,135,139],[150,,152,156],[167,,169,173],[181,247,251,259],[188,230,234,242],[195,213,217,225],[218,,220,224],[235,,237,241],[252,,254,258],[262,279,283,291],[284,,286,290]])})).then(function(e){t.json({pdf:e})}).catch(function(e){t.sendError(e)})}}]),e}();e.exports=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(16),i=r(a),u=n(5),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(12),h=r(f),p=n(13),m=r(p),v=n(6),b=r(v),y=function(){function e(){(0,c.default)(this,e),this.router=h.default.Router(),this.router.post("/iniciar",this.loginPOST.bind(this)),this.router.get("/autenticar",m.default.authenticate("jwt",{session:!1}),this.authenticateGET.bind(this)),this.router.get("/empresas",m.default.authenticate("jwt",{session:!1}),this.companiesGET.bind(this))}return(0,l.default)(e,[{key:"authenticateGET",value:function(e,t){(0,b.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{user:{code:e.user.code,name:e.user.name,email:e.user.email}});case 1:case"end":return t.stop()}},t,this)})).then(function(e){t.json(e)}).catch(function(e){t.sendError(e)})}},{key:"loginPOST",value:function(e,t){(0,b.default)(s.default.mark(function t(){var n,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.systemdb.users.findOneByEmail(e.body);case 2:return n=t.sent,t.next=5,n.auth({password:e.body.password});case 5:return t.next=7,e.app.auth.sign({code:n.code,name:n.name});case 7:return r=t.sent,t.abrupt("return",{token:r});case 9:case"end":return t.stop()}},t,this)})).then(function(e){t.json(e)}).catch(function(e){t.sendError(e)})}},{key:"companiesGET",value:function(e,t){(0,b.default)(s.default.mark(function t(){var n,r,a,u,o,c,d,l;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=!0,a=!1,u=void 0,t.prev=4,o=(0,i.default)(e.user.companies);case 6:if(r=(c=o.next()).done){t.next=15;break}return d=c.value,t.next=10,e.app.systemdb.companies.findOne({code:d.code});case 10:l=t.sent,n.push({name:l.name,uniqueName:l.uniqueName});case 12:r=!0,t.next=6;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(4),a=!0,u=t.t0;case 21:t.prev=21,t.prev=22,!r&&o.return&&o.return();case 24:if(t.prev=24,!a){t.next=27;break}throw u;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return t.abrupt("return",{companies:n});case 30:case"end":return t.stop()}},t,this,[[4,17,21,29],[22,,24,28]])})).then(function(e){console.log(e),t.json(e)}).catch(function(e){t.sendError(e)})}}]),e}();e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(0),i=r(a),u=n(1),s=r(u),o=n(12),c=r(o),d=function(){function e(){(0,i.default)(this,e),this.router=c.default.Router(),this.router.get("/recaptcha-clave-publica",this.recaptchaPublicKeyGET.bind(this))}return(0,s.default)(e,[{key:"recaptchaPublicKeyGET",value:function(e,t){t.json({rpk:e.app.defs.STR_RECAPTCHA_PUBLIC_KEY})}}]),e}();e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(5),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(12),h=r(f),p=n(6),m=r(p),v=n(17),b=r(v),y=n(24),g=r(y),x=n(20),w=(r(x),n(19)),k=r(w),S=n(21),E=r(S),_=function(){function e(){(0,c.default)(this,e)}return(0,l.default)(e,null,[{key:"process",value:function(t,n,r){(0,m.default)(s.default.mark(function r(){return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.hashed(t,n);case 2:return r.next=4,e.sigupPosted(t,n);case 4:return r.next=6,e.sigupVerified(t,n);case 6:return r.next=8,e.sigupFinished(t,n);case 8:return r.next=10,e.loged(t,n);case 10:return r.abrupt("return",{});case 11:case"end":return r.stop()}},r,this)})).then(function(e){r()}).catch(function(e){r()})}},{key:"hashed",value:function(e,t){return new i.default(function(t,n){if(e.params.accountHash){var r=e.params.accountHash.split("-");if(4===r.length&&8===r[0].length&&4===r[1].length&&4===r[2].length&&8===r[3].length)e.account={status:"hashed",hash:e.params.accountHash,statusMessages:["El codigo hash del usuario a sido validado"]},t();else{var a="El codigo hash del usuario no pudo ser validado";e.account={status:"error",hash:e.params.accountHash,statusMessages:[a]},n(a)}}else{var i="No se ha proporcionado un codigo hash para el usuario";e.account={status:"error",hash:"",statusMessages:[i]},n(i)}})}},{key:"sigupPosted",value:function(e,t){return new i.default(function(t,n){"hashed"===e.account.status?e.app.db.users.findOne({hashCode:e.params.accountHash}).then(function(n){n&&(e.account.user=n,e.account.user.currentEmail=e.account.user.emails.find(function(e){return e.current}),e.account.status="sigup-posted",e.account.statusMessages.push(" EL usuario "+e.params.accountHash+" ya está registrado")),t()}).catch(function(e){n(e)}):n()})}},{key:"sigupVerified",value:function(e,t){return new i.default(function(t,n){"sigup-posted"===e.account.status?(e.account.user.currentEmail.verified&&(e.account.status="sigup-verified",e.account.statusMessages.push(" EL usuario "+e.params.accountHash+" ya ha sido verificado")),t()):n()})}},{key:"sigupFinished",value:function(e,t){return new i.default(function(t,n){"sigup-verified"===e.account.status?("undefined"!==e.account.user.role&&(e.account.status="sigup-finished",e.account.statusMessages.push(" EL usuario "+e.params.accountHash+" ya está registrado")),t()):n()})}},{key:"loged",value:function(e,t){return new i.default(function(t,n){e.app.auth.authorize(e,function(r,a){r?n():a?(e.account.status="loged-in",e.account.statusMessages.push(" EL usuario "+e.params.accountHash+" ha iniciado sesión"),t()):(e.account.status="loged-out",e.account.statusMessages.push(" EL usuario "+e.params.accountHash+" no ha iniciado sesión"))})})}}]),e}(),O=function(){function e(){(0,c.default)(this,e),this.router=h.default.Router(),this.router.get("/",this.welcome.bind(this)),this.router.get("/crear-cuenta/:accountHash?",_.process,this.createAccount.bind(this)),this.router.get("/verificar/:accountHash?",_.process,this.verifyAccount.bind(this)),this.router.get("/verificar-email/:accountHash/:emailHash",_.process,this.verifyAccountEmail.bind(this)),this.router.get("/finalizar/:accountHash",_.process,this.finish.bind(this)),this.router.get("/api/estado-cuenta/:accountHash?",_.process,this.statusAccountGET.bind(this)),this.router.get("/api/email/:accountHash?",_.process,this.signupEmailGET.bind(this)),this.router.post("/api/crear-cuenta/:accountHash?",g.default.verifyCaptchaMW,_.process,this.createAccountPOST.bind(this)),this.router.post("/api/crear-clave/:accountHash?",_.process,this.createAccountPasswordPOST.bind(this))}return(0,l.default)(e,[{key:"welcome",value:function(e,t){t.send(E.default.view("signup"))}},{key:"createAccount",value:function(e,t){switch(e.account.status){case"hashed":t.send(E.default.view("signup"));break;case"sigup-posted":t.redirect("/registro/verificar/"+e.account.hash);break;case"sigup-verified":t.redirect("/registro/finalizar/"+e.account.hash);break;case"sigup-finished":case"loged-out":t.redirect("/login");break;case"loged-in":t.redirect("/cuenta");break;case"error":default:t.status(404).send("ERROR")}}},{key:"verifyAccount",value:function(e,t){switch(e.account.status){case"hashed":t.redirect("/registro/crear-cuenta/"+e.account.hash);break;case"sigup-posted":t.send(E.default.view("signup"));break;case"sigup-verified":t.redirect("/registro/finalizar/"+e.account.hash);break;case"sigup-finished":case"loged-out":t.redirect("/login");break;case"loged-in":t.redirect("/cuenta");break;case"error":default:t.status(404).send("ERROR")}}},{key:"finish",value:function(e,t){switch(e.account.status){case"hashed":t.redirect("/registro/crear-cuenta/"+e.account.hash);break;case"sigup-posted":t.redirect("/registro/verificar/"+e.account.hash);break;case"sigup-verified":t.send(E.default.view("signup"));break;case"sigup-finished":case"loged-out":t.redirect("/login");break;case"loged-in":t.redirect("/cuenta");break;case"error":default:t.status(404).send("ERROR")}}},{key:"verifyAccountEmail",value:function(e,t){(0,m.default)(s.default.mark(function n(){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e.account.status,n.next="hashed"===n.t0?3:"sigup-posted"===n.t0?5:"sigup-verified"===n.t0?13:"sigup-finished"===n.t0?15:"loged-out"===n.t0?15:"loged-in"===n.t0?17:(n.t0,19);break;case 3:return t.redirect("/registro/crear-cuenta/"+e.account.hash),n.abrupt("break",20);case 5:if(e.account.user.currentEmail.verificationHash!==e.params.emailHash){n.next=11;break}return n.next=8,e.account.user.updateVerifyEmail(e.account.user.currentEmail);case 8:t.redirect("/registro/finalizar/"+e.account.hash),n.next=12;break;case 11:throw"Error Invalid emailHash";case 12:return n.abrupt("break",20);case 13:return t.redirect("/registro/finalizar/"+e.account.hash),n.abrupt("break",20);case 15:return t.redirect("/login"),n.abrupt("break",20);case 17:return t.redirect("/cuenta"),n.abrupt("break",20);case 19:throw"ERROR";case 20:return n.abrupt("return",e.account.user);case 21:case"end":return n.stop()}},n,this)})).then(function(e){}).catch(function(e){t.status(404).send(e)})}},{key:"statusAccountGET",value:function(t,n){(0,m.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.account.status,e.next="hashed"===e.t0?3:"sigup-posted"===e.t0?3:"sigup-verified"===e.t0?3:"sigup-finished"===e.t0?3:"loged-out"===e.t0?3:"loged-in"===e.t0?3:4;break;case 3:return e.abrupt("return",{status:t.account.status});case 4:throw{message:"Error del servidor. <"+t.account.statusMessages+">"};case 5:case"end":return e.stop()}},e,this)})).then(function(e){n.json(e)}).catch(function(t){e.responseStdError(n,k.default.std(t))})}},{key:"signupEmailGET",value:function(t,n){(0,m.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.account.status,e.next="sigup-posted"===e.t0?3:"sigup-verified"===e.t0?3:"sigup-finished"===e.t0?3:"loged-out"===e.t0?3:"loged-in"===e.t0?3:6;break;case 3:return e.next=5,t.app.db.emails.findOne({_id:t.account.user.currentEmail.emailRef});case 5:return e.abrupt("return",e.sent);case 6:throw{message:"Error del servidor. <"+t.account.statusMessages+">"};case 7:case"end":return e.stop()}},e,this)})).then(function(e){n.json(e)}).catch(function(t){e.responseStdError(n,k.default.std(t))})}},{key:"createAccountPOST",value:function(t,n){(0,m.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.account.status,e.next="hashed"===e.t0?3:10;break;case 3:return e.next=5,t.app.db.users.insertOne(t.body);case 5:return n=e.sent,e.next=8,t.app.mailer.send(t.app.mailer.verifyEmailMessageFor(n),t.body.email);case 8:return r=e.sent,e.abrupt("return",n);case 10:throw{message:"Error del servidor. <"+t.account.statusMessages+">"};case 11:case"end":return e.stop()}},e,this)})).then(function(e){n.json(e)}).catch(function(t){e.responseStdError(n,k.default.std(t))})}},{key:"createAccountPasswordPOST",value:function(t,n){(0,m.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.account.status,e.next="sigup-verified"===e.t0?3:12;break;case 3:return e.next=5,t.app.auth.sign({hashCode:t.account.user.hashCode,name:t.account.user.name});case 5:return n=e.sent,e.next=8,t.account.user.insertPassword(t.body);case 8:return e.next=10,t.account.user.updateRole({role:"client"});case 10:return console.log(n),e.abrupt("return",{token:n});case 12:throw{message:"Error del servidor. <"+t.account.statusMessages+">"};case 13:case"end":return e.stop()}},e,this)})).then(function(e){n.json(e)}).catch(function(t){e.responseStdError(n,k.default.std(t))})}}],[{key:"responseStdError",value:function(e,t){console.error(b.default.red("ERROR: "+t.message)),e.status(t.responseStatus).json(t)}}]),e}();e.exports=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(12),l=r(d),f=n(6),h=r(f),p=n(21),m=r(p),v=function(){function e(){(0,s.default)(this,e),this.router=l.default.Router(),this.router.get("/",this.home.bind(this)),this.router.get("/adm",this.admHome.bind(this)),this.router.get("/adm/inventarios",this.inventory.bind(this)),this.router.get("/adm/inventarios/articulos",this.inventory.bind(this)),this.router.get("/adm/inventarios/articulos/ver/:article",this.inventory.bind(this)),this.router.get("/adm/inventarios/articulos/insertar/:article?",this.inventory.bind(this)),this.router.get("/adm/inventarios/articulos/editar/:article",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes/ver/:warehouse",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes/insertar/:warehouse?",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes/editar/:warehouse?",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes-entradas",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes-entradas/ver/:entry",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes-entradas/insertar/:entry?",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes-salidas",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes-salidas/ver/:entry",this.inventory.bind(this)),this.router.get("/adm/inventarios/almacenes-salidas/insertar/:entry?",this.inventory.bind(this)),this.router.get("/adm/inventarios/proveedores",this.inventory.bind(this)),this.router.get("/adm/inventarios/proveedores/ver/:provider",this.inventory.bind(this)),this.router.get("/adm/inventarios/proveedores/insertar/:provider?",this.inventory.bind(this)),this.router.get("/adm/inventarios/proveedores/editar/:provider",this.inventory.bind(this)),this.router.get("/adm/inventarios/compras",this.inventory.bind(this)),this.router.get("/adm/inventarios/compras/ver/:purchase",this.inventory.bind(this)),this.router.get("/adm/inventarios/compras/insertar/:purchase?",this.inventory.bind(this)),this.router.get("/adm/inventarios/compras/cambiar-estado/:purchase",this.inventory.bind(this)),this.router.get("/adm/inventarios/transferencias",this.inventory.bind(this)),this.router.get("/adm/inventarios/transferencias/ver/:transfer",this.inventory.bind(this)),this.router.get("/adm/inventarios/transferencias/insertar/:transfer?",this.inventory.bind(this)),this.router.get("/adm/inventarios/transferencias/cambiar-estado/:transfer",this.inventory.bind(this)),this.router.use(this.notFound.bind(this))}return(0,c.default)(e,[{key:"companies",value:function(e,t){t.send("LISTA DE EMPRESAS")}},{key:"home",value:function(e,t){t.send(m.default.view("tabletec"))}},{key:"admHome",value:function(e,t){t.send(m.default.view("adm-home"))}},{key:"inventory",value:function(e,t){t.send(m.default.view("inventory"))}},{key:"notFound",value:function(e,t){t.status(404).send(m.default.view("error"))}},{key:"find",value:function(e,t,n){e.params.company?(0,h.default)(i.default.mark(function t(){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.app.systemdb.companies.findOne({uniqueName:e.params.company});case 2:return n=t.sent,t.next=5,e.app.dbConnection(n.sysname);case 5:return r=t.sent,t.abrupt("return",{company:n,db:r});case 7:case"end":return t.stop()}},t,this)})).then(function(t){e.company=t.company,e.app.db=t.db,n()}).catch(function(e){n()}):n()}},{key:"validate",value:function(e,t,n){e.company?"active"===e.company.status?n():t.status(406).send(e.company.name+" are "+e.company.status):t.status(404).send("NO COMPANY FOUND")}}]),e}();e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(6),l=r(d),f=n(12),h=r(f),p=n(21),m=r(p),v=n(37),b=r(v),y=n(36),g=r(y),x=n(38),w=r(x),k=n(29),S=r(k),E=n(39),_=r(E),O=function(){function e(){(0,s.default)(this,e);var t=new b.default,n=(new w.default,new g.default),r=new S.default,a=new _.default;this.router=h.default.Router(),this.router.use("/api/seguridad",t.router),this.router.use("/api/cuenta",n.router),this.router.use("/api/empresa/:company",a.find,r.validate,r.router),this.router.use("/build/test",this.buildtest),this.router.use("/empresa/:company",a.find,a.validate,a.router),this.router.use("/empresas",a.companies),this.router.get("/",this.home.bind(this)),this.router.get("/login",this.login.bind(this)),this.router.get("/acerca-de",this.about.bind(this)),this.router.get("/acerca-de/",this.about.bind(this)),this.router.get("/acerca-de/condiciones",this.about.bind(this)),this.router.get("/acerca-de/politica-de-datos",this.about.bind(this)),this.router.get("/cuenta",this.account.bind(this)),this.router.get("/cuenta/perfil",this.account.bind(this)),this.router.get("/cuenta/empresas",this.account.bind(this))}return(0,c.default)(e,[{key:"buildtest",value:function(e,t){(0,l.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}},e,this)})).then(function(e){t.send("BUILD SUCCESS")}).catch(function(e){console.log(e),t.status(500).send("ERROR ON BUILD"+e)})}},{key:"home",value:function(e,t){t.send(m.default.view("home"))}},{key:"login",value:function(e,t){t.send(m.default.view("signup"))}},{key:"about",value:function(e,t){t.send(m.default.view("about"))}},{key:"account",value:function(e,t){t.send(m.default.view("account"))}}]),e}();e.exports=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(85),b=r(v),y=n(15),g=r(y),x=n(22),w=function(e){function t(e){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e="http://"+this.props.domainName+"/registro/verificar-email/"+this.props.userHash+"/"+this.props.emailHash,t=this.props.companyFrom;return g.default.createElement("div",null,g.default.createElement("img",{src:this.props.logoSrc}),g.default.createElement("b",null,g.default.createElement("br",null),g.default.createElement("br",null),t),g.default.createElement("p",null,"Hola ",this.props.userName),g.default.createElement("p",null,"Haz clic en el siguiente enlace para verificar la dirección de email de tu cuenta de ",t,"®:"),g.default.createElement("a",{href:e},e),g.default.createElement("p",null,"Verificar tu dirección de email te permitirá usar todas las opciones de tu cuenta de ",t,", sin gastos adicionales, en cualquier momento."),g.default.createElement("p",null,"Si deseas más información, ",g.default.createElement("a",null,"haz clic aquí")," para ver las Preguntas Frecuentes o contacta con el equipo de Asistencia de CloudTrade."),g.default.createElement("p",null,"Atentamente,",g.default.createElement("br",null),"Equipo de asistencia de ",t))}}]),t}(g.default.Component);e.exports=function(){function e(){(0,c.default)(this,e),this.siteMail={email:"pao.xaq@gmail.com",password:"pandora132",service:"Gmail"},this.domainName="cloudtrade.ml"}return(0,l.default)(e,[{key:"verifyEmailMessageFor",value:function(e){return{subject:"Correo de verificacion de tu cuenta de CloudTrade - Accion requerida",html:(0,x.renderToString)(g.default.createElement(w,{domainName:this.domainName,userHash:e.hashCode,userName:e.name,emailHash:e.emails[0].verificationHash,companyFrom:"CloudTrade",logoSrc:"https://portal.cloud-trade.com/Resources/light_background_logo.png"}))}}},{key:"send",value:function(e,t,n){return n||(n=this.siteMail),new i.default(function(r,a){var i={service:n.service,auth:{user:n.email,pass:n.password}},u=b.default.createTransport(i),s={from:n.email,to:t,subject:e.subject,html:e.html};u.sendMail(s,function(e,t){e?a(e):r(t.response)})})}}]),e}()},function(e,t,n){"use strict";var r=n(27),a=function(e){return e&&e.__esModule?e:{default:e}}(r);!function(){new a.default}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(4),l=r(d),f=n(3),h=r(f),p=n(6),m=(r(p),n(8)),v=r(m),b=n(11),y=r(b),g=n(9),x=r(g),w=n(7),k=r(w),S=function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},name:{type:String,required:!0,unique:!0},creationDate:{type:String,default:k.default.now},modifiedDate:{type:String,default:k.default.now}}))}return(0,h.default)(t,e),(0,c.default)(t,null,[{key:"generateCode",value:function(){var e=y.default.generate;return e(8)+"-"+e(4)+"-"+e(4)+"-"+e(8)}}]),t}(v.default.Schema);e.exports=function(){function e(t){(0,s.default)(this,e),this.db=t,this.schema=new S,this.model=t.connection.model("ArticleBrand",this.schema)}return(0,c.default)(e,[{key:"findAll",value:function(e){var t=this;return x.default.execTimeout(4e3,function(){return t.model.find({},"code name creationDate modifiedDate")},e)}},{key:"findOne",value:function(e,t,n){var r=this;return x.default.execTimeout(4e3,function(){var n=t||"code name creationDate modifiedDate";return r.model.findOne(e,n)},n)}},{key:"insertOne",value:function(e){}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(4),l=r(d),f=n(3),h=r(f),p=n(6),m=(r(p),n(8)),v=r(m),b=n(11),y=r(b),g=n(9),x=r(g),w=n(7),k=r(w),S=function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},name:{type:String,required:!0,unique:!0},creationDate:{type:String,default:k.default.now},modifiedDate:{type:String,default:k.default.now}}))}return(0,h.default)(t,e),(0,c.default)(t,null,[{key:"generateCode",value:function(){var e=y.default.generate;return e(4)+"-"+e(8)+"-"+e(8)+"-"+e(4)}}]),t}(v.default.Schema);e.exports=function(){function e(t){(0,s.default)(this,e),this.db=t,this.schema=new S,this.model=t.connection.model("ArticleCategory",this.schema)}return(0,c.default)(e,[{key:"findAll",value:function(e){var t=this;return x.default.execTimeout(4e3,function(){return t.model.find({},"code name creationDate modifiedDate")},e)}},{key:"findOne",value:function(e,t,n){var r=this;return x.default.execTimeout(4e3,function(){var n=t||"code name creationDate modifiedDate";return r.model.findOne(e,n)},n)}},{key:"insertOne",value:function(e){}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(10),s=r(u),o=n(2),c=r(o),d=n(0),l=r(d),f=n(1),h=r(f),p=n(4),m=r(p),v=n(3),b=r(v),y=n(6),g=r(y),x=n(8),w=r(x),k=n(11),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,l.default)(this,t);var e=new w.default.Schema({code:{type:String,ref:"Image",required:!0},creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}),n=new w.default.Schema({code:{type:String,required:!0},data:{type:Buffer,required:!0},creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}),r=new w.default.Schema({name:{type:String,required:!0},value:{type:String,required:!0}});return(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},clientCode:{type:String,required:!0,unique:!0},barCode:{type:String,required:!0,unique:!0},name:{type:String,required:!0,unique:!0},description:{type:String,required:!0},brand:{type:String,required:!0},category:{type:String,required:!0},images:[e],dataSheets:[n],customFields:[r],prices:{type:Array},creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}))}return(0,b.default)(t,e),(0,h.default)(t,null,[{key:"generateCode",value:function(){var e=S.default.generate;return e(16)+"-"+e(8)+"-"+e(4)+"-"+e(8)+"-"+e(4)+"-"+e(4)}},{key:"generateImageCode",value:function(){var e=S.default.generate;return e(32)+"-"+e(32)}},{key:"generateDataSheetCode",value:function(){var e=S.default.generate;return e(32)+"-"+e(32)}}]),t}(w.default.Schema);e.exports=function(){function e(t){(0,l.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("Article",this.schema)}return(0,h.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"",visible:!1},{name:"clientCode",text:"Código",visible:!0},{name:"name",text:"Nombre",visible:!0},{name:"brand",text:"Marca",visible:!0},{name:"category",text:"Categoria",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(e){var t=this;return _.default.execTimeout(4e3,function(){return t.model.find({},"code clientCode name brand category creationDate modifiedDate")},e)}},{key:"findOne",value:function(e,t){var n=this;return(0,g.default)(i.default.mark(function r(){var a,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code clientCode barCode name brand category description images customFields prices creationDate modifiedDate";return n.model.findOne(e,r)});case 2:if(a=r.sent,!a.images){r.next=8;break}return u=a.images.map(function(e){return n.db.images.findOne({code:e.code}).then(function(e){return{code:e.code,data:e.data}})}),r.next=7,s.default.all(u);case 7:a.modImages=r.sent;case 8:return r.abrupt("return",a);case 9:case"end":return r.stop()}},r,this)}))}},{key:"find",value:function(e,t,n){var r=this;return _.default.execTimeout(4e3,function(){var n=t||"code clientCode name brand category creationDate modifiedDate";return r.model.find(e,n)},n)}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(i.default.mark(function r(){var a,u,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.db.articleBrands.findOne({name:e.brand});case 2:return a=r.sent,r.next=5,t.db.articleCategories.findOne({name:e.category});case 5:if(u=r.sent,a){r.next=9;break}return r.next=9,n.insert(t.db.articleBrands.model,{name:e.brand});case 9:if(u){r.next=12;break}return r.next=12,n.insert(t.db.articleCategories.model,{name:e.category});case 12:return r.next=14,n.insert(t.model,e);case 14:return s=r.sent,r.abrupt("return",s);case 16:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(4),l=r(d),f=n(3),h=r(f),p=n(6),m=(r(p),n(8)),v=r(m),b=n(11),y=r(b),g=n(9),x=r(g),w=n(7),k=r(w),S=function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},name:{type:String,required:!0},country:{type:String},creationDate:{type:String,default:k.default.now},modifiedDate:{type:String,default:k.default.now}}))}return(0,h.default)(t,e),(0,c.default)(t,null,[{key:"generateCode",value:function(){var e=y.default.generate;return e(6)+"-"+e(6)+"-"+e(8)+"-"+e(6)+"-"+e(6)}}]),t}(v.default.Schema);e.exports=function(){function e(t){(0,s.default)(this,e),this.db=t,this.schema=new S,this.model=t.connection.model("City",this.schema)}return(0,c.default)(e,[{key:"findAll",value:function(e){var t=this;return x.default.execTimeout(4e3,function(){return t.model.find({},"code name country creationDate modifiedDate")},e)}},{key:"findOne",value:function(e,t,n){var r=this;return x.default.execTimeout(4e3,function(){var n=t||"code name country creationDate modifiedDate";return r.model.findOne(e,n)},n)}},{key:"insertOne",value:function(e){}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(6),b=(r(v),n(8)),y=r(b),g=n(11),x=r(g),w=n(26),k=r(w),S=n(9),E=r(S),_=n(7),O=r(_),D=function(e){function t(){(0,c.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},uniqueName:{type:String,required:!0,unique:!0},name:{type:String,required:!0},sysname:{type:String,required:!0,unique:!0},status:{type:String,required:!0,default:"active"},creationDate:{type:String,default:O.default.now},modifiedDate:{type:String,default:O.default.now}}));return e.path("uniqueName").validate(function(e){return k.default.isAlphanumeric(e,"es-ES")},"El campo 'uniqueName' debe ser alfanumérico"),e}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"generateCode",value:function(){var e=x.default.generate;return e(4)+"-"+e(8)+"-"+e(4)+"-"+e(8)}}]),t}(y.default.Schema);e.exports=function(){function e(t){(0,c.default)(this,e),this.db=t,this.schema=new D,this.model=t.connection.model("Company",this.schema)}return(0,l.default)(e,[{key:"findOne",value:function(e,t){var n=this;return E.default.execTimeout(4e3,function(){return n.model.findOne(e)},t)}},{key:"insertOne",value:function(e){var t=this,n=new E.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.sysname="co_"+x.default.generate({length:8,charset:"hex"})+"_"+e.uniqueName,r.next=3,n.insert(t.model,e);case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(0),i=r(a),u=n(1),s=r(u),o=n(8),c=r(o),d=n(79),l=r(d),f=n(17),h=r(f),p=n(49),m=r(p),v=n(55),b=r(v),y=n(47),g=r(y),x=n(51),w=r(x),k=n(46),S=r(k),E=n(50),_=r(E),O=n(45),D=r(O),C=n(43),q=r(C),A=n(44),T=r(A),N=n(52),P=r(N),R=n(59),M=r(R),j=n(56),W=r(j),B=n(57),F=r(B),I=n(58),H=r(I),z=n(60),G=r(z),U=n(61),L=r(U),Y=n(53),V=r(Y),K=n(54),J=r(K);c.default.Promise=global.Promise;var Z=function(){function e(t,n,r){var a=this;(0,i.default)(this,e),this.isConnected=!1,this.connection=c.default.createConnection(),this.connection.on("error",this.onError.bind(this)),this.connection.on("connecting",function(){}),this.connection.on("connected",function(){console.log(h.default.green("[DB] connected to:",t.db)),a.isConnected=!0,r&&r(null,a)}),this.connection.on("disconnected",function(){console.log(h.default.yellow("[DB] disconnected from:",t.db)),a.isConnected=!1}),this.connection.on("reconnected",function(){console.log(h.default.green("[DB] reconnected to:",t.db)),a.isConnected=!0}),this.connection.on("close",this.onClose.bind(this));var u="mongodb://";u=t.user&&t.user.length>0?u+t.user+":"+t.pass+"@"+t.host+":"+t.port+"/"+t.db:u+t.host+":"+t.port+"/"+t.db,this.connection.open(u,{server:{reconnectTries:Number.MAX_VALUE}}).then(function(){}).catch(function(e){console.log(e),r&&r(e)}),n?(this.emails=new m.default(this),this.users=new b.default(this),this.companies=new g.default(this)):(this.images=new w.default(this),this.cities=new S.default(this),this.staff=new _.default(this),this.articles=new D.default(this),this.articleBrands=new q.default(this),this.articleCategories=new T.default(this),this.providers=new P.default(this),this.warehouses=new M.default(this),this.warehouseEntries=new W.default(this),this.warehouseEntryPurchases=new F.default(this),this.warehouseEntryTransfers=new H.default(this),this.warehouseOutlets=new G.default(this),this.warehouseOutletTransfers=new L.default(this),this.purchases=new V.default(this),this.transfers=new J.default(this))}return(0,s.default)(e,[{key:"onError",value:function(e){console.log("DB Error",e)}},{key:"onReconnected",value:function(){console.log("DB reconnected")}},{key:"onClose",value:function(){console.log("DB close")}}]),e}(),X=function(){function e(t){(0,i.default)(this,e),this.connections=new l.default,this.cnnopt={host:t.connection.host,port:t.connection.port,user:t.connection.user,pass:t.connection.pass,db:t.connection.sysdb},this.systemdb=new Z(this.cnnopt,!0)}return(0,s.default)(e,[{key:"connection",value:function(e,t){var n={host:this.cnnopt.host,port:this.cnnopt.port,user:this.cnnopt.user,pass:this.cnnopt.pass,db:e},r=this.connections;if(r.has(e)){var a=r.get(e);a.isConnected&&t(null,a)}else{var i=new Z(n,!1,t);r.set(e,i)}}}]),e}();e.exports=X},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(8),b=r(v),y=n(11),g=r(y),x=n(26),w=r(x),k=n(9),S=r(k),E=n(7),_=r(E),O=function(e){function t(){(0,c.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},email:{type:String,required:!0,unique:!0},creationDate:{type:String,default:_.default.now},modifiedDate:{type:String,default:_.default.now}}));return e.path("email").validate(function(e){return w.default.isEmail(e)},"El campo 'email' no es válido"),e}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"generateCode",value:function(){var e=g.default.generate;return e(8)+"-"+e(8)+"-"+e(8)+"-"+e(8)}}]),t}(b.default.Schema);e.exports=function(){function e(t){(0,c.default)(this,e),this.db=t,this.schema=new O,this.model=t.connection.model("Email",this.schema)}return(0,l.default)(e,[{key:"findOne",value:function(e,t){var n=this;return S.default.execTimeout(4e3,function(){return n.model.findOne(e)},t)}},{key:"insertOne",value:function(e){var t=this,n=new S.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.model,e);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(1),s=r(u),o=n(2),c=r(o),d=n(0),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(8),b=r(v),y=n(11),g=(r(y),n(9)),x=r(g),w=n(7),k=r(w),S=function(e){function t(){return(0,l.default)(this,t),(0,h.default)(this,(t.__proto__||(0,c.default)(t)).call(this,{code:{type:String,required:!0,unique:!0},role:{type:String,required:!0},creationDate:{type:String,default:k.default.now},modifiedDate:{type:String,default:k.default.now}}))}return(0,m.default)(t,e),t}(b.default.Schema);e.exports=function(){function e(t){(0,l.default)(this,e),this.db=t,this.schema=new S,this.model=t.connection.model("Employee",this.schema)}return(0,s.default)(e,[{key:"findOne",value:function(e,t){var n=this;return x.default.execTimeout(4e3,function(){return n.model.findOne(e)},t)}},{key:"insertOne",value:function(e){var t=this,n=new x.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.model,e);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(8),b=r(v),y=n(11),g=r(y),x=n(9),w=r(x),k=n(7),S=r(k),E=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},data:{type:Buffer,required:!0},mimetype:{type:String,required:!0},creationDate:{type:String,default:S.default.now},modifiedDate:{type:String,default:S.default.now}}))}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"generateCode",value:function(){var e=g.default.generate;return e(32)+"-"+e(8)+"-"+e(32)}}]),t}(b.default.Schema);e.exports=function(){function e(t){(0,c.default)(this,e),this.db=t,this.schema=new E,this.model=t.connection.model("Image",this.schema)}return(0,l.default)(e,[{key:"findOne",value:function(e,t,n){var r=this;return w.default.execTimeout(4e3,function(){var n=t||"code data type creationDate modifiedDate";return r.model.findOne(e,n)},n)}},{key:"insertOne",value:function(e){var t=this,n=new w.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.model,e);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(6),b=(r(v),n(8)),y=r(b),g=n(11),x=r(g),w=n(9),k=r(w),S=n(7),E=r(S),_=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},nit:{type:String,required:!0,unique:!0},name:{type:String,required:!0},phone:{type:String,required:!0},city:{type:String,required:!0},description:{type:String},email:{type:String},address:{type:String},creationDate:{type:String,default:E.default.now},modifiedDate:{type:String,default:E.default.now}}))}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"generateCode",value:function(){var e=x.default.generate;return e(8)+"-"+e(4)+"-"+e(8)+"-"+e(4)}}]),t}(y.default.Schema);e.exports=function(){function e(t){(0,c.default)(this,e),this.db=t,this.schema=new _,this.model=t.connection.model("Providers",this.schema)}return(0,l.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"",visible:!1},{name:"nit",text:"NIT",visible:!0},{name:"name",text:"Nombre",visible:!0},{name:"city",text:"Ciudad",visible:!0},{name:"phone",text:"Teléfono",visible:!0},{name:"email",text:"Correo electrónico",visible:!0},{name:"address",text:"Dirección",visible:!0},{name:"description",text:"Descripción",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(e){var t=this;return k.default.execTimeout(4e3,function(){return t.model.find({},"code nit name description email address city phone creationDate modifiedDate")},e)}},{key:"findOne",value:function(e,t,n){var r=this;return k.default.execTimeout(4e3,function(){var n=t||"code nit name description email address city phone creationDate modifiedDate";return r.model.findOne(e,n)},n)}},{key:"insertOne",value:function(e){var t=this,n=new k.default;return n.run(i.default.mark(function r(){var a,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.db.cities.findOne({name:e.city});case 2:if(a=r.sent){r.next=6;break}return r.next=6,n.insert(t.db.cities.model,{name:e.city});case 6:return r.next=8,n.insert(t.model,e);case 8:return u=r.sent,r.abrupt("return",u);case 10:case"end":return r.stop()}},r,this)}))}},{key:"updateOne",value:function(e){var t=this,n=new k.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.update(t.model,{code:e.code},{nit:e.nit,name:e.name,phone:e.phone,city:e.city,description:e.description,email:e.email,address:e.address,modifiedDate:E.default.now()});case 2:return a=r.sent,r.abrupt("return",t.findOne({code:e.code}));case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(10),s=r(u),o=n(2),c=r(o),d=n(0),l=r(d),f=n(1),h=r(f),p=n(4),m=r(p),v=n(3),b=r(v),y=n(6),g=r(y),x=n(8),w=r(x),k=n(11),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,l.default)(this,t);var e=new w.default.Schema({code:{type:String,ref:"Article",required:!0},quantity:{type:Number,min:1,required:!0},unitPrice:{type:Number,required:!0},measurement:{type:String,required:!0},remark:{type:String}}),n=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},business:{type:String,required:!0},order:{type:String},guideNumber:{type:String},status:{type:String,required:!0,default:"created"},providerCode:{type:String,ref:"Provider",required:!0},contactName:{type:String},payDate:{type:String},billingDir:{type:String,required:!0},billingCountry:{type:String},billingDep:{type:String},shippingDir:{type:String,required:!0},shippingCountry:{type:String},shippingDep:{type:String},shippingProvince:{type:String},shippingPostal:{type:String},terms:{type:String},description:{type:String},articles:[e],creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}));return n.path("articles").validate(function(e){return e.length},"El campo 'articles' no puede ser un array vacío"),n.methods.addField=n.addField,n}return(0,b.default)(t,e),(0,h.default)(t,[{key:"addField",value:function(e,t){this[e]=t,console.log(this[e])}}],[{key:"generateCode",value:function(){var e=S.default.generate;return e(16)+"-"+e(16)+"-"+e(16)}}]),t}(w.default.Schema);e.exports=function(){function e(t){(0,l.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("Purchase",this.schema)}return(0,h.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"Código",visible:!1},{name:"business",text:"Asunto",visible:!0},{name:"order",text:"Referencia del pedido",visible:!0},{name:"guideNumber",text:"Número de guía",visible:!0},{name:"status",text:"Estado",visible:!0},{name:"providerName",text:"Nombre del proveedor",visible:!0},{name:"contactName",text:"Nombre de contacto",visible:!0},{name:"payDate",text:"Fecha de pago",visible:!0},{name:"billingDir",text:"Derección de facturación",visible:!0},{name:"shippingDir",text:"Derección de envío",visible:!0},{name:"description",text:"Descripción",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(){return this.find({})}},{key:"find",value:function(e,t){var n=this;return(0,g.default)(i.default.mark(function r(){var a,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code business order guideNumber status providerCode contactName payDate billingDir shippingDir description creationDate modifiedDate";return n.model.find(e,r)});case 2:return a=r.sent,u=a.map(function(e){return n.db.providers.findOne({code:e.providerCode},"name").then(function(t){e.providerName=t.name})}),r.next=6,s.default.all(u);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}},r,this)}))}},{key:"findOne",value:function(e,t){var n=this;return(0,g.default)(i.default.mark(function r(){var a,u,o;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code business order guideNumber status providerCode contactName payDate billingDir billingCountry billingDep shippingDir shippingCountry shippingDep shippingProvince shippingPostal terms description articles creationDate modifiedDate";return n.model.findOne(e,r)});case 2:if(a=r.sent){r.next=5;break}throw"No se ha encontrado la compra";case 5:if(!a.providerCode){r.next=10;break}return r.next=8,n.db.providers.findOne({code:a.providerCode},"code name");case 8:u=r.sent,a.modProvider={code:u.code,name:u.name};case 10:if(!a.articles){r.next=15;break}return o=a.articles.map(function(e){return n.db.articles.findOne({code:e.code},"code name").then(function(t){return{code:t.code,name:t.name,quantity:e.quantity,unitPrice:e.unitPrice,measurement:e.measurement,remark:e.remark}})}),r.next=14,s.default.all(o);case 14:a.modArticles=r.sent;case 15:return r.abrupt("return",a);case 16:case"end":return r.stop()}},r,this)}))}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.model,e);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}},{key:"updateOneStatus",value:function(e){var t=this,n=new _.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.update(t.model,{code:e.code},{status:e.status,modifiedDate:D.default.now()});case 2:return a=r.sent,r.abrupt("return",t.findOne({code:e.code}));case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(10),s=r(u),o=n(2),c=r(o),d=n(0),l=r(d),f=n(1),h=r(f),p=n(4),m=r(p),v=n(3),b=r(v),y=n(6),g=r(y),x=n(8),w=r(x),k=n(11),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,l.default)(this,t);var e=new w.default.Schema({code:{type:String,ref:"Article",required:!0},quantity:{type:Number,min:1,required:!0},unitPrice:{type:Number,required:!0},remark:{type:String}}),n=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},business:{type:String,required:!0},status:{type:String,required:!0,default:"created"},originWarehouseCode:{type:String,ref:"Warehouse",required:!0},destinationWarehouseCode:{type:String,ref:"Warehouse",required:!0},description:{type:String},articles:[e],creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}));return n.path("articles").validate(function(e){return e.length},"El campo 'articles' no puede ser un array vacío"),n}return(0,b.default)(t,e),(0,h.default)(t,null,[{key:"generateCode",value:function(){var e=S.default.generate;return e(16)+"-"+e(32)}}]),t}(w.default.Schema);e.exports=function(){function e(t){(0,l.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("Transfer",this.schema)}return(0,h.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"Código",visible:!1},{name:"business",text:"Asunto",visible:!0},{name:"status",text:"Estado",visible:!0},{name:"originWarehouseName",text:"Almacén origen",visible:!0},{name:"destinationWarehouseName",text:"Almacén destino",visible:!0},{name:"description",text:"Descripción",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(){return this.find({})}},{key:"findOne",value:function(e,t){var n=this;return(0,g.default)(i.default.mark(function r(){var a,u,o,c;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code business status originWarehouseCode destinationWarehouseCode description articles creationDate modifiedDate";return n.model.findOne(e,r)});case 2:if(a=r.sent){r.next=5;break}throw"No se ha encontrado la transferencia";case 5:if(!a.originWarehouseCode){r.next=10;break}return r.next=8,n.db.warehouses.model.findOne({code:a.originWarehouseCode});case 8:u=r.sent,a.originWarehouse={code:u.code,name:u.name};case 10:if(!a.destinationWarehouseCode){r.next=15;break}return r.next=13,n.db.warehouses.model.findOne({code:a.destinationWarehouseCode});case 13:o=r.sent,a.destinationWarehouse={code:o.code,name:o.name};case 15:if(!a.articles){r.next=20;break}return c=a.articles.map(function(e){return n.db.articles.model.findOne({code:e.code},"code name brand").then(function(t){return{code:t.code,name:t.name,brand:t.brand,quantity:e.quantity,unitPrice:e.unitPrice,remark:e.remark}})}),r.next=19,s.default.all(c);case 19:a.modArticles=r.sent;case 20:return r.abrupt("return",a);case 21:case"end":return r.stop()}},r,this)}))}},{key:"find",value:function(e,t){var n=this;return(0,g.default)(i.default.mark(function r(){var a,u,o;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code business status originWarehouseCode destinationWarehouseCode description creationDate modifiedDate";return n.model.find(e,r)});case 2:return a=r.sent,u=a.map(function(e){return n.db.warehouses.model.findOne({code:e.originWarehouseCode}).then(function(t){e.originWarehouseName=t.name})}),o=a.map(function(e){return n.db.warehouses.model.findOne({code:e.destinationWarehouseCode}).then(function(t){e.destinationWarehouseName=t.name})}),r.next=7,s.default.all(u);case 7:return r.next=9,s.default.all(o);case 9:return r.abrupt("return",a);case 10:case"end":return r.stop()}},r,this)}))}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.model,e);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}},{key:"updateOneStatus",value:function(e){var t=this,n=new _.default;return n.run(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.update(t.model,{code:e.code},{status:e.status,modifiedDate:D.default.now()});case 2:return a=r.sent,r.abrupt("return",t.findOne({code:e.code}));case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(10),s=r(u),o=n(2),c=r(o),d=n(0),l=r(d),f=n(1),h=r(f),p=n(4),m=r(p),v=n(3),b=r(v),y=n(6),g=r(y),x=n(8),w=r(x),k=n(76),S=r(k),E=n(11),_=r(E),O=n(9),D=r(O),C=n(7),q=r(C),A="79IHEKr3Yq5PNMU1w095t1poNb66xAk5-08skXdhVGJPll9YKEShewJM1wjWG52hp-mKEmSOBVA0fc5yNCeS0AoE4idDAxhHvH",T=function(e){function t(){(0,l.default)(this,t);var e=new w.default.Schema({code:{type:String,ref:"Email",required:!0,unique:!0},current:{type:Boolean,required:!0,default:!0},verified:{type:Boolean,required:!0,default:!1},verificationHash:{type:String,required:!0,unique:!0,default:t.generateEmailVerificationHash},creationDate:{type:String,default:q.default.now},modifiedDate:{type:String,default:q.default.now}}),n=new w.default.Schema({encrypted:{type:String,required:!0},current:{type:Boolean,required:!0,default:!0},creationDate:{type:String,default:q.default.now},modifiedDate:{type:String,default:q.default.now}}),r=new w.default.Schema({data:{type:Buffer,required:!0},current:{type:Boolean,required:!0,default:!1},creationDate:{type:String,default:q.default.now},modifiedDate:{type:String,default:q.default.now}}),a=new w.default.Schema({code:{type:String,ref:"Company",required:!0},role:{type:String}}),i=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},clientHash:{type:String,required:!0,unique:!0},usename:{type:String},name:{type:String,required:!0},emails:[e],passwords:[n],profileImages:[r],companies:[a],role:{type:String,required:!0,default:"undefined"},creationDate:{type:String,default:q.default.now},modifiedDate:{type:String,default:q.default.now}}));return i.path("emails").validate(function(e){return e.length},"El campo 'emails' no puede ser un array vacío"),i.methods.auth=i.auth,i.methods.insertPassword=i.insertPassword,i.methods.updateVerifyEmail=i.updateVerifyEmail,i.methods.updateRole=i.updateRole,i.methods.addCompany=i.addCompany,i}return(0,b.default)(t,e),(0,h.default)(t,[{key:"auth",value:function(e){var n=this;return new s.default(function(r,a){var i=n.passwords.find(function(e){return!0===e.current});if(i){t.decryptText(i.encrypted)===e.password?r(i):a({responseStatus:406,message:"La contraseña no es válida"})}else a({responseStatus:406,message:"El usuario no tiene contraseña"})})}},{key:"insertPassword",value:function(e){var n=this;return D.default.execTimeout(4e3,function(){var r=n.passwords.find(function(e){return!0===e.current});return r&&(r.current=!1,r.modifiedDate=q.default.now()),n.passwords.push({encrypted:t.encryptText(e.password)}),n.save()})}},{key:"updateVerifyEmail",value:function(e){var t=this,n=this.emails.find(function(t){return t.verificationHash===e.verificationHash});return n?(n.verified=!0,n.modifiedDate=q.default.now(),D.default.execTimeout(4e3,function(){return t.save()})):new s.default(function(e,t){t("Clave de verificación de email inválido")})}},{key:"updateRole",value:function(e){var t=this;return D.default.execTimeout(4e3,function(){return t.role=e.role,t.modifiedDate=q.default.now(),t.save()})}},{key:"addCompany",value:function(e){var t=this;return D.default.execTimeout(4e3,function(){return t.companies.push({code:e.code}),t.save()})}}],[{key:"encryptText",value:function(e){var t=S.default.createCipher("aes-256-ctr",A),n=t.update(e,"utf8","hex");return n+=t.final("hex")}},{key:"decryptText",value:function(e){var t=S.default.createDecipher("aes-256-ctr",A),n=t.update(e,"hex","utf8");return n+=t.final("utf8")}},{key:"generateCode",value:function(){var e=_.default.generate;return e(8)+"-"+e(16)+"-"+e(8)}},{key:"generateEmailVerificationHash",value:function(){var e=_.default.generate;return e(32)+"-"+e(32)+"-"+e(32)}}]),t}(w.default.Schema);e.exports=function(){function e(t){(0,l.default)(this,e),this.db=t,this.schema=new T,this.model=t.connection.model("User",this.schema)}return(0,h.default)(e,[{key:"findOne",value:function(e,t){var n=this;return D.default.execTimeout(4e3,function(){return n.model.findOne(e)},t)}},{key:"findOneByEmail",value:function(e){var t=this;return(0,g.default)(i.default.mark(function n(){var r,a;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.db.emails.findOne({email:e.email});case 2:if(r=n.sent){n.next=5;break}throw{responseStatus:406,message:"El correo electrónico "+e.email+" no está registrado"};case 5:return n.next=7,D.default.execTimeout(4e3,function(){return t.model.findOne({"emails.code":r.code})});case 7:return a=n.sent,n.abrupt("return",a);case 9:case"end":return n.stop()}},n,this)}))}},{key:"insertOne",value:function(e){var t=this,n=new D.default;return n.run(i.default.mark(function r(){var a,u,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.db.emails.findOne({email:e.email});case 2:if(!(a=r.sent)){r.next=5;break}throw{responseStatus:406,message:"El correo electrónico "+e.email+" ya fue registrado. Porfavor intente usar un correo electrónico diferente"};case 5:return r.next=7,n.insert(t.db.emails.model,{email:e.email});case 7:return u=r.sent,r.next=10,n.insert(t.model,{clientHash:e.clientHash,usename:e.usename,name:e.name,emails:[{code:u.code}]});case 10:return s=r.sent,r.abrupt("return",s);case 12:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(6),b=r(v),y=n(8),g=r(y),x=n(11),w=r(x),k=n(9),S=r(k),E=n(7),_=r(E),O=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},transactionsTypeName:{type:String,required:!0},description:{type:String,required:!0,unique:!0},entryDate:{type:String,required:!0},creationDate:{type:String,default:_.default.now},modifiedDate:{type:String,default:_.default.now}}))}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"generateCode",value:function(){var e=w.default.generate;return e(8)+"-"+e(8)+"-"+e(8)+"-"+e(8)}}]),t}(g.default.Schema);e.exports=function(){function e(t){(0,c.default)(this,e),this.db=t,this.schema=new O,this.model=t.connection.model("WarehouseEntry",this.schema)}return(0,l.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"Código",visible:!1},{name:"transactionsTypeName",text:"Concepto",visible:!0},{name:"description",text:"Descripción",visible:!0},{name:"entryDate",text:"Fecha de entrada",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(){return this.find({})}},{key:"find",value:function(e,t){var n=this;return(0,b.default)(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,S.default.execTimeout(4e3,function(){var r=t||"code transactionsTypeName description entryDate creationDate modifiedDate";return n.model.find(e,r)});case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}},{key:"findOne",value:function(e,t,n){var r=this;return S.default.execTimeout(4e3,function(){var n=t||"code transactionsTypeName description entryDate creationDate modifiedDate";return r.model.findOne(e,n)},n)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(5),s=r(u),o=n(16),c=r(o),d=n(1),l=r(d),f=n(2),h=r(f),p=n(0),m=r(p),v=n(4),b=r(v),y=n(3),g=r(y),x=n(6),w=r(x),k=n(8),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,m.default)(this,t);var e=new S.default.Schema({code:{type:String,ref:"Article",required:!0},warehouseCode:{type:String,ref:"Warehouse",required:!0},quantity:{type:Number,min:0,required:!0},remark:{type:String}}),n=new S.default.Schema({code:{type:String,ref:"Purchase",required:!0},articles:[e]}),r=(0,b.default)(this,(t.__proto__||(0,h.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,ref:"WarehouseEntry"},transactions:[n],creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}));return n.path("articles").validate(function(e){return e.length},"El campo 'articles' no puede ser un array vacío"),r.path("transactions").validate(function(e){return e.length},"El campo 'transactions' no puede ser un array vacío"),r}return(0,g.default)(t,e),t}(S.default.Schema);e.exports=function(){function e(t){(0,m.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("WarehouseEntryPurchase",this.schema)}return(0,l.default)(e,[{key:"findAll",value:function(e){var t=this;return _.default.execTimeout(4e3,function(){var n=e||"code transactions creationDate modifiedDate";return t.model.find({},n)})}},{key:"findOne",value:function(e,t){var n=this;return(0,w.default)(s.default.mark(function r(){var a,u,o,d,l,f,h,p,m;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code transactions creationDate modifiedDate";return n.model.findOne(e,r)});case 2:if(a=r.sent,!a.transactions){r.next=43;break}a.modTransactions=[],u=!0,o=!1,d=void 0,r.prev=8,l=(0,c.default)(a.transactions);case 10:if(u=(f=l.next()).done){r.next=29;break}return h=f.value,r.next=14,n.db.purchases.findOne({code:h.code},"code business");case 14:if(p=r.sent){r.next=17;break}throw"Referencia a compra perdida";case 17:return m=h.articles.map(function(e){return(0,w.default)(s.default.mark(function t(){var r,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.db.warehouses.findOne({code:e.warehouseCode},"code name");case 2:if(r=t.sent){t.next=5;break}throw"Referencia a almacén perdida";case 5:return t.next=7,n.db.articles.findOne({code:e.code},"code name");case 7:return a=t.sent,t.abrupt("return",{code:a.code,name:a.name,quantity:e.quantity,warehouseCode:e.warehouseCode,warehouseName:r.name,remark:e.remark});case 9:case"end":return t.stop()}},t,this)}))}),r.t0=a.modTransactions,r.t1=p.code,r.t2=p.business,r.next=23,i.default.all(m);case 23:r.t3=r.sent,r.t4={code:r.t1,business:r.t2,articles:r.t3},r.t0.push.call(r.t0,r.t4);case 26:u=!0,r.next=10;break;case 29:r.next=35;break;case 31:r.prev=31,r.t5=r.catch(8),o=!0,d=r.t5;case 35:r.prev=35,r.prev=36,!u&&l.return&&l.return();case 38:if(r.prev=38,!o){r.next=41;break}throw d;case 41:return r.finish(38);case 42:return r.finish(35);case 43:return r.abrupt("return",a);case 44:case"end":return r.stop()}},r,this,[[8,31,35,43],[36,,38,42]])}))}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(s.default.mark(function r(){var a,i,u,o,d,l,f,h,p,m,v,b,y,g,x=this;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.db.warehouseEntries.model,e);case 2:return a=r.sent,e.code=a.code,r.next=6,n.insert(t.model,e);case 6:i=r.sent,u=!0,o=!1,d=void 0,r.prev=10,l=(0,c.default)(e.transactions);case 12:if(u=(f=l.next()).done){r.next=44;break}h=f.value,p=!0,m=!1,v=void 0,r.prev=17,b=s.default.mark(function e(){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.value,e.next=3,t.db.warehouses.findOne({code:r.warehouseCode},"code articles");case 3:if(a=e.sent){e.next=6;break}throw"Referencia a almacén perdida";case 6:return i=a.articles.find(function(e){return e.code===r.code}),i?i.stock=i.stock+r.quantity:a.articles.push({code:r.code,stock:r.quantity}),e.next=10,n.update(t.db.warehouses.model,{code:r.warehouseCode},{articles:a.articles,modifiedDate:D.default.now()});case 10:case"end":return e.stop()}},e,x)}),y=(0,c.default)(h.articles);case 20:if(p=(g=y.next()).done){r.next=25;break}return r.delegateYield(b(),"t0",22);case 22:p=!0,r.next=20;break;case 25:r.next=31;break;case 27:r.prev=27,r.t1=r.catch(17),m=!0,v=r.t1;case 31:r.prev=31,r.prev=32,!p&&y.return&&y.return();case 34:if(r.prev=34,!m){r.next=37;break}throw v;case 37:return r.finish(34);case 38:return r.finish(31);case 39:return r.next=41,n.update(t.db.purchases.model,{code:h.code},{status:h.status||"joined",modifiedDate:D.default.now()});case 41:u=!0,r.next=12;break;case 44:r.next=50;break;case 46:r.prev=46,r.t2=r.catch(10),o=!0,d=r.t2;case 50:r.prev=50,r.prev=51,!u&&l.return&&l.return();case 53:if(r.prev=53,!o){r.next=56;break}throw d;case 56:return r.finish(53);case 57:return r.finish(50);case 58:return r.abrupt("return",i);case 59:case"end":return r.stop()}},r,this,[[10,46,50,58],[17,27,31,39],[32,,34,38],[51,,53,57]])}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(5),s=r(u),o=n(16),c=r(o),d=n(1),l=r(d),f=n(2),h=r(f),p=n(0),m=r(p),v=n(4),b=r(v),y=n(3),g=r(y),x=n(6),w=r(x),k=n(8),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,m.default)(this,t);var e=new S.default.Schema({code:{type:String,ref:"Article",required:!0},warehouseCode:{type:String,ref:"Warehouse",required:!0},quantity:{type:Number,min:0,required:!0},remark:{type:String}}),n=new S.default.Schema({code:{type:String,ref:"Transfer",required:!0},articles:[e]}),r=(0,b.default)(this,(t.__proto__||(0,h.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,ref:"WarehouseEntry"},transactions:[n],creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}));return n.path("articles").validate(function(e){return e.length},"El campo 'articles' no puede ser un array vacío"),r.path("transactions").validate(function(e){return e.length},"El campo 'transactions' no puede ser un array vacío"),r}return(0,g.default)(t,e),t}(S.default.Schema);e.exports=function(){function e(t){(0,m.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("WarehouseEntryTransfer",this.schema)}return(0,l.default)(e,[{key:"findAll",value:function(e){var t=this;return _.default.execTimeout(4e3,function(){var n=e||"code transactions creationDate modifiedDate";return t.model.find({},n)})}},{key:"findOne",value:function(e,t){var n=this;return(0,w.default)(s.default.mark(function r(){var a,u,o,d,l,f,h,p,m;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code transactions creationDate modifiedDate";return n.model.findOne(e,r)});case 2:if(a=r.sent,!a.transactions){r.next=43;break}a.modTransactions=[],u=!0,o=!1,d=void 0,r.prev=8,l=(0,c.default)(a.transactions);case 10:if(u=(f=l.next()).done){r.next=29;break}return h=f.value,r.next=14,n.db.transfers.findOne({code:h.code},"code business");case 14:if(p=r.sent){r.next=17;break}throw"Referencia a transferencia perdida";case 17:return m=h.articles.map(function(e){return(0,w.default)(s.default.mark(function t(){var r,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.db.warehouses.findOne({code:e.warehouseCode},"code name");case 2:if(r=t.sent){t.next=5;break}throw"Referencia a almacén perdida";case 5:return t.next=7,n.db.articles.findOne({code:e.code},"code name");case 7:return a=t.sent,t.abrupt("return",{code:a.code,name:a.name,quantity:e.quantity,warehouseCode:e.warehouseCode,warehouseName:r.name,remark:e.remark});case 9:case"end":return t.stop()}},t,this)}))}),r.t0=a.modTransactions,r.t1=p.code,r.t2=p.business,r.next=23,i.default.all(m);case 23:r.t3=r.sent,r.t4={code:r.t1,business:r.t2,articles:r.t3},r.t0.push.call(r.t0,r.t4);case 26:u=!0,r.next=10;break;case 29:r.next=35;break;case 31:r.prev=31,r.t5=r.catch(8),o=!0,d=r.t5;case 35:r.prev=35,r.prev=36,!u&&l.return&&l.return();case 38:if(r.prev=38,!o){r.next=41;break}throw d;case 41:return r.finish(38);case 42:return r.finish(35);case 43:return r.abrupt("return",a);case 44:case"end":return r.stop()}},r,this,[[8,31,35,43],[36,,38,42]])}))}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(s.default.mark(function r(){var a,i,u,o,d,l,f,h,p,m,v,b,y,g,x=this;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.db.warehouseEntries.model,e);case 2:return a=r.sent,e.code=a.code,r.next=6,n.insert(t.model,e);case 6:i=r.sent,u=!0,o=!1,d=void 0,r.prev=10,l=(0,c.default)(e.transactions);case 12:if(u=(f=l.next()).done){r.next=44;break}h=f.value,p=!0,m=!1,v=void 0,r.prev=17,b=s.default.mark(function e(){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.value,e.next=3,t.db.warehouses.findOne({code:r.warehouseCode},"code articles");case 3:if(a=e.sent){e.next=6;break}throw"Referencia a almacén perdida";case 6:return i=a.articles.find(function(e){return e.code===r.code}),i?i.stock=i.stock+r.quantity:a.articles.push({code:r.code,stock:r.quantity}),e.next=10,n.update(t.db.warehouses.model,{code:r.warehouseCode},{articles:a.articles,modifiedDate:D.default.now()});case 10:case"end":return e.stop()}},e,x)}),y=(0,c.default)(h.articles);case 20:if(p=(g=y.next()).done){r.next=25;break}return r.delegateYield(b(),"t0",22);case 22:p=!0,r.next=20;break;case 25:r.next=31;break;case 27:r.prev=27,r.t1=r.catch(17),m=!0,v=r.t1;case 31:r.prev=31,r.prev=32,!p&&y.return&&y.return();case 34:if(r.prev=34,!m){r.next=37;break}throw v;case 37:return r.finish(34);case 38:return r.finish(31);case 39:return r.next=41,n.update(t.db.transfers.model,{code:h.code},{status:h.status||"joined",modifiedDate:D.default.now()});case 41:u=!0,r.next=12;break;case 44:r.next=50;break;case 46:r.prev=46,r.t2=r.catch(10),o=!0,d=r.t2;case 50:r.prev=50,r.prev=51,!u&&l.return&&l.return();case 53:if(r.prev=53,!o){r.next=56;break}throw d;case 56:return r.finish(53);case 57:return r.finish(50);case 58:return r.abrupt("return",i);case 59:case"end":return r.stop()}},r,this,[[10,46,50,58],[17,27,31,39],[32,,34,38],[51,,53,57]])}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(10),s=r(u),o=n(2),c=r(o),d=n(0),l=r(d),f=n(1),h=r(f),p=n(4),m=r(p),v=n(3),b=r(v),y=n(6),g=r(y),x=n(8),w=r(x),k=n(11),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,l.default)(this,t);var e=new w.default.Schema({code:{type:String,ref:"Article",required:!0},stock:{type:Number,min:0,required:!0,default:0}}),n=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},clientCode:{type:String,required:!0,unique:!0},name:{type:String,required:!0,unique:!0},type:{type:String,required:!0},country:{type:String,required:!0},city:{type:String,required:!0,ref:"City"},address:{type:String,required:!0},phone:{type:String},postcode:{type:String},articles:[e],creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}));return n.methods.findAllStockOn=n.findAllStockOn,n}return(0,b.default)(t,e),(0,h.default)(t,[{key:"findAllStockOn",value:function(e){var t=this;return(0,g.default)(i.default.mark(function n(){return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.articles){n.next=6;break}return n.next=3,s.default.all(t.articles.map(function(t){return e.findOne({code:t.code}).then(function(e){return{code:e.code,name:e.name,brand:e.brand,category:e.category,stock:t.stock}})}));case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=[];case 7:return n.abrupt("return",n.t0);case 8:case"end":return n.stop()}},n,this)}))}}],[{key:"generateCode",value:function(){var e=S.default.generate;return e(16)+"-"+e(16)}}]),t}(w.default.Schema);e.exports=function(){function e(t){(0,l.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("Warehouse",this.schema)}return(0,h.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"",visible:!1},{name:"clientCode",text:"Código",visible:!0},{name:"name",text:"Nombre",visible:!0},{name:"type",text:"Tipo",visible:!0},{name:"country",text:"País",visible:!0},{name:"city",text:"Ciudad",visible:!0},{name:"address",text:"Dirección",visible:!0},{name:"phone",text:"Teléfono",visible:!0},{name:"postcode",text:"Código postal",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(e){var t=this;return _.default.execTimeout(4e3,function(){return t.model.find({},"code clientCode name type country city address phone postcode creationDate modifiedDate")},e)}},{key:"findOne",value:function(e,t,n){var r=this;return _.default.execTimeout(4e3,function(){var n=t||"code clientCode name type country city address phone postcode articles creationDate modifiedDate";return r.model.findOne(e,n)},n)}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(i.default.mark(function r(){var a,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.db.cities.findOne({name:e.city});case 2:if(a=r.sent){r.next=6;break}return r.next=6,n.insert(t.db.cities.model,{name:e.city});case 6:return r.next=8,n.insert(t.model,e);case 8:return u=r.sent,r.abrupt("return",u);case 10:case"end":return r.stop()}},r,this)}))}},{key:"updateOne",value:function(e,t){var n=this,r=new _.default;return r.run(i.default.mark(function a(){var u;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.update(n.model,e,t);case 2:return u=a.sent,a.abrupt("return",n.findOne(e));case 5:case"end":return a.stop()}},a,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(5),i=r(a),u=n(2),s=r(u),o=n(0),c=r(o),d=n(1),l=r(d),f=n(4),h=r(f),p=n(3),m=r(p),v=n(6),b=r(v),y=n(8),g=r(y),x=n(11),w=r(x),k=n(9),S=r(k),E=n(7),_=r(E),O=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,default:t.generateCode},transactionsTypeName:{type:String,required:!0},description:{type:String,required:!0,unique:!0},outletDate:{type:String,required:!0},creationDate:{type:String,default:_.default.now},modifiedDate:{type:String,default:_.default.now}}))}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"generateCode",value:function(){var e=w.default.generate;return e(8)+"-"+e(8)+"-"+e(8)+"-"+e(8)}}]),t}(g.default.Schema);e.exports=function(){function e(t){(0,c.default)(this,e),this.db=t,this.schema=new O,this.model=t.connection.model("WarehouseOutlet",this.schema)}return(0,l.default)(e,[{key:"getSchemaColumns",value:function(){return[{name:"code",text:"Código",visible:!1},{name:"transactionsTypeName",text:"Concepto",visible:!0},{name:"description",text:"Descripción",visible:!0},{name:"outletDate",text:"Fecha de salida",visible:!0},{name:"creationDate",text:"Fecha de creación",visible:!0},{name:"modifiedDate",text:"Fecha de modificación",visible:!0}]}},{key:"findAll",value:function(){return this.find({})}},{key:"find",value:function(e,t){var n=this;return(0,b.default)(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,S.default.execTimeout(4e3,function(){var r=t||"code transactionsTypeName description outletDate creationDate modifiedDate";return n.model.find(e,r)});case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}},{key:"findOne",value:function(e,t){var n=this;return(0,b.default)(i.default.mark(function r(){var a;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,S.default.execTimeout(4e3,function(){var r=t||"code transactionsTypeName description outletDate creationDate modifiedDate";return n.model.findOne(e,r)});case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}},r,this)}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(10),i=r(a),u=n(5),s=r(u),o=n(16),c=r(o),d=n(1),l=r(d),f=n(2),h=r(f),p=n(0),m=r(p),v=n(4),b=r(v),y=n(3),g=r(y),x=n(6),w=r(x),k=n(8),S=r(k),E=n(9),_=r(E),O=n(7),D=r(O),C=function(e){function t(){(0,m.default)(this,t);var e=new S.default.Schema({code:{type:String,ref:"Article",required:!0},warehouseCode:{type:String,ref:"Warehouse",required:!0},quantity:{type:Number,min:0,required:!0},remark:{type:String}}),n=new S.default.Schema({code:{type:String,ref:"Transfer",required:!0},articles:[e]}),r=(0,b.default)(this,(t.__proto__||(0,h.default)(t)).call(this,{code:{type:String,required:!0,unique:!0,ref:"WarehouseOutlet"},transactions:[n],creationDate:{type:String,default:D.default.now},modifiedDate:{type:String,default:D.default.now}}));return n.path("articles").validate(function(e){return e.length},"El campo 'articles' no puede ser un array vacío"),r.path("transactions").validate(function(e){return e.length},"El campo 'transactions' no puede ser un array vacío"),r}return(0,g.default)(t,e),t}(S.default.Schema);e.exports=function(){function e(t){(0,m.default)(this,e),this.db=t,this.schema=new C,this.model=t.connection.model("WarehouseOutletTransfer",this.schema)}return(0,l.default)(e,[{key:"findAll",value:function(e){var t=this;return _.default.execTimeout(4e3,function(){var n=e||"code transactions creationDate modifiedDate";return t.model.find({},n)})}},{key:"findOne",value:function(e,t){var n=this;return(0,w.default)(s.default.mark(function r(){var a,u,o,d,l,f,h,p,m;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.execTimeout(4e3,function(){var r=t||"code transactions creationDate modifiedDate";return n.model.findOne(e,r)});case 2:if(a=r.sent,!a.transactions){r.next=43;break}a.modTransactions=[],u=!0,o=!1,d=void 0,r.prev=8,l=(0,c.default)(a.transactions);case 10:if(u=(f=l.next()).done){r.next=29;break}return h=f.value,r.next=14,n.db.transfers.findOne({code:h.code},"code business");case 14:if(p=r.sent){r.next=17;break}throw"Referencia a transferencia perdida";case 17:return m=h.articles.map(function(e){return(0,w.default)(s.default.mark(function t(){var r,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.db.warehouses.findOne({code:e.warehouseCode},"code name");case 2:if(r=t.sent){t.next=5;break}throw"Referencia a almacén perdida";case 5:return t.next=7,n.db.articles.findOne({code:e.code},"code name");case 7:return a=t.sent,t.abrupt("return",{code:a.code,name:a.name,warehouseCode:e.warehouseCode,warehouseName:r.name,quantity:e.quantity,remark:e.remark});case 9:case"end":return t.stop()}},t,this)}))}),r.t0=a.modTransactions,r.t1=p.code,r.t2=p.business,r.next=23,i.default.all(m);case 23:r.t3=r.sent,r.t4={code:r.t1,business:r.t2,articles:r.t3},r.t0.push.call(r.t0,r.t4);case 26:u=!0,r.next=10;break;case 29:r.next=35;break;case 31:r.prev=31,r.t5=r.catch(8),o=!0,d=r.t5;case 35:r.prev=35,r.prev=36,!u&&l.return&&l.return();case 38:if(r.prev=38,!o){r.next=41;break}throw d;case 41:return r.finish(38);case 42:return r.finish(35);case 43:return r.abrupt("return",a);case 44:case"end":return r.stop()}},r,this,[[8,31,35,43],[36,,38,42]])}))}},{key:"insertOne",value:function(e){var t=this,n=new _.default;return n.run(s.default.mark(function r(){var a,i,u,o,d,l,f,h,p,m,v,b,y,g,x=this;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.insert(t.db.warehouseOutlets.model,e);case 2:return a=r.sent,e.code=a.code,r.next=6,n.insert(t.model,e);case 6:i=r.sent,u=!0,o=!1,d=void 0,r.prev=10,l=(0,c.default)(e.transactions);case 12:if(u=(f=l.next()).done){r.next=44;break}h=f.value,p=!0,m=!1,v=void 0,r.prev=17,b=s.default.mark(function e(){var r,a,i,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.value,e.next=3,t.db.warehouses.findOne({code:r.warehouseCode},"code articles");case 3:if(a=e.sent){e.next=6;break}throw"Referencia a almacén perdida";case 6:return i=a.articles.find(function(e){return e.code===r.code}),i?(u=i.stock-r.quantity,i.stock=u>0?u:0):a.articles.push({code:r.code,stock:0}),e.next=10,n.update(t.db.warehouses.model,{code:r.warehouseCode},{articles:a.articles,modifiedDate:D.default.now()});case 10:case"end":return e.stop()}},e,x)}),y=(0,c.default)(h.articles);case 20:if(p=(g=y.next()).done){r.next=25;break}return r.delegateYield(b(),"t0",22);case 22:p=!0,r.next=20;break;case 25:r.next=31;break;case 27:r.prev=27,r.t1=r.catch(17),m=!0,v=r.t1;case 31:r.prev=31,r.prev=32,!p&&y.return&&y.return();case 34:if(r.prev=34,!m){r.next=37;break}throw v;case 37:return r.finish(34);case 38:return r.finish(31);case 39:return r.next=41,n.update(t.db.transfers.model,{code:h.code},{status:h.status||"withdrawn",modifiedDate:D.default.now()});case 41:u=!0,r.next=12;break;case 44:r.next=50;break;case 46:r.prev=46,r.t2=r.catch(10),o=!0,d=r.t2;case 50:r.prev=50,r.prev=51,!u&&l.return&&l.return();case 53:if(r.prev=53,!o){r.next=56;break}throw d;case 56:return r.finish(53);case 57:return r.finish(50);case 58:return r.abrupt("return",i);case 59:case"end":return r.stop()}},r,this,[[10,46,50,58],[17,27,31,39],[32,,34,38],[51,,53,57]])}))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(4),l=r(d),f=n(3),h=r(f),p=n(15),m=r(p);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return m.default.createElement("head",null,this.props.children,this.props.styleSheets.map(function(e,t){return m.default.createElement("link",{key:t,rel:"stylesheet",type:"text/css",href:e})}),this.props.scripts?this.props.scripts.map(function(e,t){return m.default.createElement("script",{key:t,src:e})}):null,m.default.createElement("meta",{name:"viewport",content:"width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1"}),m.default.createElement("title",null,this.props.title))}}]),t}(m.default.Component)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(1),c=r(o),d=n(4),l=r(d),f=n(3),h=r(f),p=n(15),m=r(p);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return m.default.createElement("body",null,this.props.scripts.map(function(e,t){return m.default.createElement("script",{key:t,src:e})}))}}]),t}(m.default.Component)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"about"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"account"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"adm-home"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"error"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"home"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"inventory"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"signup"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),i=r(a),u=n(0),s=r(u),o=n(4),c=r(o),d=n(3),l=r(d),f=n(14),h=r(f);e.exports=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,"tabletec"))}return(0,l.default)(t,e),t}(h.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(0),i=r(a),u=n(1),s=r(u),o=n(25),c=r(o),d=n(18),l=r(d),f=n(75),h=r(f);e.exports=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"load",value:function(e){var t=e?e+".theme.json":"default.theme.json",n=l.default.join(__dirname,"themes",t);try{return JSON.parse(c.default.readFileSync(n,"utf8"))}catch(e){return console.error(h.default.red('ERROR: No se pudo abrir el archivo "'+n+'"')),{name:"default",version:"0.01",htmlColor:"#01579b",colorName:"light-blue darken-4",styleSheets:[],scripts:["/js/jquery.js"],routes:[{name:"home",scripts:["/js/tabletec.default.home.js"]}]}}}}]),e}()},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("colors/safe")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("express-fileupload")},function(e,t){e.exports=require("file-type")},function(e,t){e.exports=require("hashmap")},function(e,t){e.exports=require("html-pdf")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("jsonfile")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("nodemailer")},function(e,t){e.exports=require("passport-custom")},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("stream-to-array")}]);